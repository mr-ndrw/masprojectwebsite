var app = angular.module('CineOsApp', ['ui.bootstrap']);
app.controller('ReservationController', ['$scope',
    function($scope) {
        $scope.regions = regions;
        $scope.cinemas = cinemas;
        $scope.films = films;

        /*	Event handlers	*/
        $scope.userCredentialsEntered = function() {
            //	validate
            $(window).scrollTo('#region-cinema-section', {
                duration: 1000,
                easing: 'swing'
            });
            //	then scroll down
        };

        $scope.scrollToUserRegistration = function() {
            $(window).scrollTo('#user-credentials-section', {
                duration: 1000,
                easing: 'swing'
            });
        };

        $scope.regionSelected = function() {
            $scope.selectedCinema = cinemas[0];
        };

        $scope.cinemaSelected = function() {
            $('#cinema-details').slideToggle({
                duration: 400,
                easing: 'easeInQuad',
                done: function() {
                    $('#cinema-selection-yes-no-buttons').slideToggle({
                        duration: 200,
                        easing: 'easeInQuad'
                    });
                }
            });

        };
        $scope.cinemaSelectionNo = function() {
            $('#cinema-selection-yes-no-buttons').slideToggle({
                duration: 400,
                easing: 'easeInQuad',
                done: function() {
                    $('#cinema-details').slideToggle({
                        duration: 200,
                        easing: 'easeInQuad'
                    });
                }
            });
            $('#region-select').prop('disabled', false);
            $('#cinema-select').prop('disabled', false);
            $('#yes-button').prop('disabled', false);
            $scope.selectedCinema = null;
        };

        $scope.cinemaSelectionYes = function() {
            $('#region-select').prop('disabled', true);
            $('#cinema-select').prop('disabled', true);
            $('#yes-button').prop('disabled', true);

            //	Move the user to film selection
            $(window).scrollTo('#film-selection-section', {
                duration: 1000,
                easing: 'swing'
            });

        };

        /*	End event handlers*/
    }
]);

app.filter('filterCinemasInSelectedRegion', function() {
    return function(input, selectedRegion) {
        var out = [];
        angular.forEach(input, function(cinema) {
            if (cinema.regionId == selectedRegion.id) {
                out.push(cinema);
            }
        });
        return out;
    };
});

/*  Helper Functions */

/**
    Returns the films which are being played in the provided cinema, based on the provided projections list.
*/
function getFilmsForCinema(cinema, projections, films) {
    var projectionsLength = projections.length;
    //  Filter out the projections which happen in the provided cinema;
    var foundProjections = [];

    for (var i = 0; i < projectionsLength; i++) {
        var projection = projections[i];
        if (projection.cinemaId == cinema.id) {
            foundProjections.push(projection);
        }
    }

    //  Once we've got the projections, now filter out the films which are being played in this projections
    //  Just make sure to only contain one reference to a film.
    var filmsResult = [];
    films.forEach(function(film) {
        foundProjections.forEach(function(projection) {
            if (projection.filmId == film.id) {
                if (!doesArrayContain(filmsResult, film)) {
                    filmsResult.push(film);
                }
            }
        });
    });

    return filmsResult;
}
/**
 * Created by andrew on 02/04/15.
 */
$(function(){
    $('#filmsList').slimScroll({
        height: '50vh'
    });
});
/**
 * Created by andrew on 02/04/15.
 */
function addClass( classname, element ) {
    var cn = element.className;
    //test for existance
    if( cn.indexOf( classname ) != -1 ) {
        return;
    }
    //add a space if the element already has class
    if( cn != '' ) {
        classname = ' '+classname;
    }
    element.className = cn+classname;
}

function removeClass( classname, element ) {
    var cn = element.className;
    var rxp = new RegExp( "\\s?\\b"+classname+"\\b", "g" );
    cn = cn.replace( rxp, '' );
    element.className = cn;
}

function hasClass(classname, element){
    return element.className.indexOf( classname ) != -1;
}


function doesArrayContain(array, element) {
    var arrayLength = array.length;
    for (var i = 0; i < arrayLength; i++) {
        if (array[i] === element) {
            return true;
        }
    }
    return false;
}

var films = [{
    id: 1,
    title: "Up!",
    genre: "Animated",
    director: "Joss Whedon",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "Tony Stark"
    }, {
        name: "Bruce Banner"
    }, {
        name: "Natasha Romanova"
    }],
    esrb: "Kids",
    posterpath: "images/up!.jpg"
}, {
    id: 2,
    title: "Iron Man",
    genre: "Superhero",
    director: "Joss Whedon",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "Robert Downey Jr."
    }, {
        name: "Gwyneth Paltrow"
    }, {
        name: "Jeff Bridges"
    }],
    esrb: "Kids",
    posterpath: "images/ironman.jpg"
}, {
    id: 3,
    title: "Star Wars IV: New Hope",
    genre: "Sci-Fi",
    director: "George Lucas",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "Mark Hamill"
    }, {
        name: "Harrison Ford"
    }, {
        name: "Kenny Baker"
    }],
    esrb: "Kids",
    posterpath: "images/newhope.jpg"
}, {
    id: 4,
    title: "Les Miserables",
    genre: "Musical",
    director: "Alfie Bowe",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "Hugh Jackman"
    }, {
        name: "Anne Hathaway"
    }, {
        name: "Russel Crowe"
    }],
    esrb: "Mids",
    posterpath: "images/lesmiserbles.jpg"
}, {
    id: 5,
    title: "Pulp Fiction",
    genre: "Thriller",
    director: "Quentin Tarantino",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "John Travolta"
    }, {
        name: "Samuel L. Jackson"
    }, {
        name: "Bruce Willis"
    }],
    esrb: "Mids",
    posterpath: "images/pulpfiction.jpg"
}, {
    id: 6,
    title: "Hitchhiker's Guide to Galaxy",
    genre: "Sci-Fi",
    director: "Garth Jennings",
    description: "Lorem ipsum dolor sit amet, ne luptatum phaedrum singulis usu. Et has ancillae epicurei gubergren. Animal deterruisset no nam. Habemus postulant nam te.Quo ex atqui vituperata, pro ne decore accusamus constituam, sit no dicit saepe aliquando. Deleniti definitionem cu his, vis eu semper corpora fastidii. Cum audiam debitis ancillae et, erat zril ea mea. Ignota fabulas vel ea, ipsum ullum vocent at est. Ne veniam fuisset voluptua quo.",
    actors: [{
        name: "Martin Freeman"
    }, {
        name: "Mos Def"
    }, {
        name: "Zooey Deschanel"
    }, {
        name: "Sam Rockwell"
    }],
    esrb: "Mids",
    posterpath: "images/hitchhiker.jpg"
}];

var projections = [{
    id: 1,
    cinemaId: 1,
    filmId: 1,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 2,
    cinemaId: 1,
    filmId: 2,
    datetime: "2015-07-10T18:30:00"
}, {
    id: 3,
    cinemaId: 1,
    filmId: 3,
    datetime: "2015-07-11T15:30:00"
}, {
    id: 4,
    cinemaId: 1,
    filmId: 4,
    datetime: "2015-07-12T15:30:00"
}, {
    id: 5,
    cinemaId: 2,
    filmId: 5,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 6,
    cinemaId: 2,
    filmId: 6,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 7,
    cinemaId: 3,
    filmId: 3,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 8,
    cinemaId: 3,
    filmId: 4,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 9,
    cinemaId: 4,
    filmId: 1,
    datetime: "2015-07-10T15:30:00"
}, {
    id: 10,
    cinemaId: 4,
    filmId: 6,
    datetime: "2015-07-11T15:30:00"
}];

var regions = [{
    id: 1,
    regionName: "East"
}, {
    id: 2,
    regionName: "West"
}, {
    id: 3,
    regionName: "North"
}, {
    id: 4,
    regionName: "South"
}];

var cinemas = [{
    id: 1,
    regionId: 1,
    cinemaName: "Nice Cinema",
    address: {
        city: "Warsaw",
        street: "2034 Nice Street"
    }
}, {
    id: 2,
    regionId: 2,
    cinemaName: "Best Cinema",
    address: {
        city: "Cracow",
        street: "3450 Bad Street"
    }
}, {
    id: 3,
    regionId: 3,
    cinemaName: "Friendly Cinema",
    address: {
        city: "Danzig",
        street: "1st Alley"
    }
}, {
    id: 4,
    regionId: 4,
    cinemaName: "Second Best Cinema",
    address: {
        city: "Stettin",
        street: "34 Worst Street"
    }
}];

var seats = [
    [false, false, false, false, false],
    [false, true, false, true, false],
    [true, false, true, false, false],
    [false, false, false, false, false],
    [false, false, false, false, false]
];
$('.ripple').ripple();

function createTable(seatMatrix) {
    //  Create A table
    var table = document.createElement('table');
    table.className = 'table';  //  Add bootstrap class to table

    var thead = document.createElement('thead');
    table.appendChild(thead);

    var headerRow = document.createElement('tr');
    thead.appendChild(headerRow);

    headerRow.appendChild(document.createElement('td'));
    //  Above adds an empty cell where column number and row number listings intersect.

    //  Count how many columns there are in the seatMatrix and then insert the first row containing column numbers
    var colCount = seatMatrix[0].length;
    for(var i = 1; i <= colCount; i++)
    {
        var headerColumnNumberCell = document.createElement('td');
        headerColumnNumberCell.innerHTML = i;
        headerColumnNumberCell.className = 'text-center';
        headerRow.appendChild(headerColumnNumberCell);
    }

    var tbody = document.createElement('tbody');
    table.appendChild(tbody);

    var rowCount = seatMatrix.length;
    for(var rowNumber = 1; rowNumber <= rowCount; rowNumber++)
    {
        var row = createRow(seatMatrix[rowNumber-1], rowNumber);
        tbody.appendChild(row);
    }


    return table;
}

function createRow(seatRowArray, rowNumber) {
    var tr = document.createElement('tr');

    var seatRowArrayLength = seatRowArray.length;

    var rowNumberCell = document.createElement('td');
    rowNumberCell.innerHTML = rowNumber;
    tr.appendChild(rowNumberCell);
    for(var columnNumber = 1; columnNumber <= seatRowArrayLength; columnNumber ++)
    {
        var td = document.createElement('td');
        var seatButton = createSeatButton(
            {
                row: rowNumber, col: columnNumber
            },
            seatRowArray[columnNumber-1],
            'seat-btn btn btn-default btn-block');
        td.appendChild(seatButton);
        tr.appendChild(td);
    }

    return tr;
}

function createSeatButton(position, isBooked, cssClasses) {
    var button = document.createElement('button');
    button.className = cssClasses;
    button.dataset.position = position.row + '_' + position.col;
    button.dataset.isbooked = isBooked;
    if(isBooked)
    {
        button.setAttribute('disabled', 'disabled');
        button.className += " glyphicon glyphicon-remove";
    }
    else
    {
        button.className += " glyphicon glyphicon-asterisk";
        button.dataset.selected = false;
    }

    button.onclick = function(event){seatButtonOnClick(event)};

    return button;
}

function seatButtonOnClick (event){
    var target = event.target;
    var isSelected = target.dataset.selected;

    if(isSelected === "false")
    {
        addClass(pressedClassName, target);
        removeClass(defaultClassName, target);
        addClass(selectedClassName, target);
        removeClass(availableGIClassName, target);
        addClass(selectedGIClassName, target);
        target.dataset.selected = "true";
    }
    else
    {
        removeClass(pressedClassName, target);
        removeClass(selectedClassName, target);
        addClass(defaultClassName, target);
        addClass(availableGIClassName, target);
        removeClass(selectedGIClassName, target);
        target.dataset.selected = "false"
    }
}
/*  Helper definitions  */
var pressedClassName = 'active';
var selectedClassName = 'btn-success';
var defaultClassName = 'btn-default';
var availableGIClassName = 'glyphicon-asterisk';
var selectedGIClassName = 'glyphicon-ok';

/*  End of helper definitions   */

$(document).ready(function(){
    var table = createTable(seats);
    $('#seat-map').append(table);
});
/**
 * jQuery plugin to produce the ripple effect from the Google Material Design spec:
 * http://www.google.com/design/spec/animation/responsive-interaction.html
 *
 * This plugin was modified from a codepen simulating the effect:
 * http://codepen.io/Craigtut/pen/dIfzv
 */
(function($, ua) {

    var
        // setTimeout reference
        timer = null,

        // Better testing of touch support
        // See https://github.com/ngryman/jquery.finger/blob/v0.1.2/dist/jquery.finger.js#L7
        isChrome = /chrome/i.exec(ua),
        isAndroid = /android/i.exec(ua),
        hasTouch = 'ontouchstart' in window && !(isChrome && !isAndroid),

        // Notify applications of the ripple effect
        setRipple = function($paper) {
            if (!$paper.data('ripple')) {
                $paper
                    .data('ripple', true)
                    .trigger('ripple');
            }
        };

    /**
     * jQuery.fn.ripple
     * @param {Object} options
     * @param {String} [options.color=#fff] The ripple effect color
     */
    $.fn.ripple = function(options) {
        var opts = $.extend({}, { color: '#fff' }, options);
        opts.event = (hasTouch && 'touchstart.ripple') || 'mousedown.ripple';
        opts.end_event = (hasTouch && 'touchend.ripple mouseleave.ripple') || 'mouseup.ripple';

        $(this)
            // Bind the event to run the effect
            .on(opts.event, function(ev) {
                var x, y, touch_ev,
                    $paper = $(this),
                    $ink = $('<div/>'),
                    size = Math.max($paper.width(), $paper.height());

                // Set up ripple effect styles
                $paper
                    .trigger('beforeripple')
                    .addClass('ripple-active');
                $ink
                    .addClass('ripple-effect')
                    .css({height: size, width: size});

                // get click coordinates
                // logic = click coordinates relative to page
                // - position relative to page - half of self height/width to make it controllable from the center
                touch_ev = hasTouch ? ev.originalEvent.touches[0] : ev;
                x = touch_ev.pageX - $paper.offset().left - $ink.width()/2;
                y = touch_ev.pageY - $paper.offset().top - $ink.height()/2;

                // Set up ripple position and place it in the DOM
                $ink
                    .css({top: y + 'px', left: x + 'px', backgroundColor: opts.color})
                    .appendTo($paper);

                // Delayed trigger
                timer = setTimeout(function() { setRipple($paper); }, 2000);
            })
            // Bind the event to end the paper-press ripple
            .on(opts.end_event, function(ev) {
                var $paper = $(this),
                    $ink = $paper.find('.ripple-effect');

                // Trigger the ripple if we hadn't yet
                if (timer) {
                    clearTimeout(timer);
                    timer = null;
                    setRipple($paper);
                }

                // Remove ripple effect styles
                $paper
                    .trigger('afterripple')
                    .removeClass('ripple-active');
                $ink
                    .css({backgroundColor: 'transparent'})
                    .one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function() {
                        $ink.remove();
                        $paper.removeData('ripple');
                    });
            });

        // Chaining
        return $(this);
    };

}(window.jQuery, navigator.userAgent));

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.0
 *
 */
(function(f){jQuery.fn.extend({slimScroll:function(h){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},h);this.each(function(){function r(d){if(s){d=d||
window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,f,h){k=!1;var e=d,g=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),g),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());
e=l*(b[0].scrollHeight-b.outerHeight());h&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),g),c.css({top:d+"px"}));b.scrollTop(e);b.trigger("slimscrolling",~~e);v();p()}function C(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1),this.addEventListener("MozMousePixelScroll",r,!1)):document.attachEvent("onmousewheel",r)}function w(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:u+"px"});
var a=u==b.outerHeight()?"none":"block";c.css({display:a})}function v(){w();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;B=l;u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&g.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&s||(x||y)||(c.fadeOut("slow"),g.fadeOut("slow"))},1E3))}var s,x,y,A,z,u,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),
c=b.parent().find("."+a.barClass),g=b.parent().find("."+a.railClass);w();if(f.isPlainObject(h)){if("height"in h&&"auto"==h.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in h)n=parseInt(a.scrollTo);else if("scrollBy"in h)n+=parseInt(a.scrollBy);else if("destroy"in h){c.remove();g.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height="auto"==a.height?b.parent().height():a.height;n=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",
overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var g=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?
"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};g.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(g);a.railDraggable&&c.bind("mousedown",function(a){var b=f(document);y=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});
b.bind("mouseup.slimscroll",function(a){y=!1;p();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});g.hover(function(){v()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){s=!0;v();p()},function(){s=!1;p()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&
(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});w();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this.drag=a.extend({},m),this.state=a.extend({},n),this.e=a.extend({},o),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a[0].toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Pipe,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement("div"),f=a;for(b in f)if(d=f[b],"undefined"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function i(){return g(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function j(){return g(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function k(){return"ontouchstart"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o;m={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},n={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},o={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Plugins={},e.Pipe=[{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var a=this._clones,b=this.$stage.children(".cloned");(b.length!==a.length||!this.settings.loop&&a.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var a,b,c=this._clones,d=this._items,e=this.settings.loop?c.length-Math.max(2*this.settings.items,4):0;for(a=0,b=Math.abs(e/2);b>a;a++)e>0?(this.$stage.children().eq(d.length+c.length-1).remove(),c.pop(),this.$stage.children().eq(0).remove(),c.pop()):(c.push(c.length/2),this.$stage.append(d[c[c.length-1]].clone().addClass("cloned")),c.push(d.length-1-(c.length-1)/2),this.$stage.prepend(d[c[c.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var a,b,c,d=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(3),f=0;for(this._coordinates=[],b=0,c=this._clones.length+this._items.length;c>b;b++)a=this._mergers[this.relative(b)],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,f+=(this.settings.autoWidth?this._items[this.relative(b)].width()+this.settings.margin:e*a)*d,this._coordinates.push(f)}},{filter:["width","items","settings"],run:function(){var b,c,d=(this.width()/this.settings.items).toFixed(3),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(e),e={width:this.settings.autoWidth?"auto":d-this.settings.margin},e[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&a.grep(this._mergers,function(a){return a>1}).length>0)for(b=0,c=this._coordinates.length;c>b;b++)e.width=Math.abs(this._coordinates[b])-Math.abs(this._coordinates[b-1]||0)-this.settings.margin,this.$stage.children().eq(b).css(e);else this.$stage.children().css(e)}},{filter:["width","items","settings"],run:function(a){a.current&&this.reset(this.$stage.children().index(a.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],e.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var b,c,e;if(b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e)return this.preloadAutoWidthImages(b),!1}this.$element.addClass("owl-loading"),this.$stage=a("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),delete e.responsive,e.responsiveClass&&this.$element.attr("class",function(a,b){return b.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+d)):e=a.extend({},this.options),(null===this.settings||this._breakpoint!==d)&&(this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},e.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={}},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=b.orientation,this.watchVisibility(),this.trigger("refreshed")},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._onResize=a.proxy(function(a){this.onResize(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},e.prototype.eventsRouter=function(a){var b=a.type;"mousedown"===b||"touchstart"===b?this.onDragStart(a):"mousemove"===b||"touchmove"===b?this.onDragMove(a):"mouseup"===b||"touchend"===b?this.onDragEnd(a):"touchcancel"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.$stage.on("mousedown",a.proxy(function(a){this.eventsRouter(a)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!c&&this.$stage.on("touchstart touchcancel",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,"resize",a.proxy(this.onThrottledResize,this))},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if("mousedown"===e.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if("mouseup"===b.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(".owl.dragEvents")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on("click.preventClick",this.e._preventClick),b.setTimeout(function(){a(c).off("click.preventClick")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off("click.preventClick")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),a=a.replace(/matrix(3d)?\(|\)/g,"").split(","),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=-1,d=30,e=this.width(),f=this.coordinates();return this.settings.freeDrag||a.each(f,a.proxy(function(a,g){return b>g-d&&g+d>b?c=a:this.op(b,"<",g)&&this.op(b,">",f[a+1]||g-e)&&(c="left"===this.state.direction?a+1:a),-1===c},this)),this.settings.loop||(this.op(b,">",f[this.minimum()])?c=b=this.minimum():this.op(b,"<",f[this.maximum()])&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+b+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:b+"px"}):this.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(a){this._invalidated[a]=!0},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(b,c){var e=c?this._items.length:this._items.length+this._clones.length;return!a.isNumeric(b)||1>e?d:b=this._clones.length?(b%e+e)%e:Math.max(this.minimum(c),Math.min(this.maximum(c),b))},e.prototype.relative=function(a){return a=this.normalize(a),a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=0,f=this.settings;if(a)return this._items.length-1;if(!f.loop&&f.center)b=this._items.length-1;else if(f.loop||f.center)if(f.loop||f.center)b=this._items.length+f.items;else{if(!f.autoWidth&&!f.merge)throw"Can not detect maximum absolute position.";for(revert=f.rtl?1:-1,c=this.$stage.width()-this.$element.width();(d=this.coordinates(e))&&!(d*revert>=c);)b=++e}else b=this._items.length-f.items;return b},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c=null;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[b-1]||0))/2*(this.settings.rtl?-1:1)):c=this._coordinates[b-1]||0,c)},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.relative(this.current()),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1,j=this._clones.length+this._items.length;h<this.settings.items&&i===!1?(f=g+this._items.length,this.reset(f)):h>=j-this.settings.items&&i===!0&&(f=g-this._items.length,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e),this.update()},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c),this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.transitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw"Can not detect viewport width.";d=c.documentElement.clientWidth}return d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(a.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(a,b){b=b===d?this._items.length:this.normalize(b,!0),this.trigger("add",{content:a,position:b}),0===this._items.length||b===this._items.length?(this.$stage.append(a),this._items.push(a),this._mergers.push(1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[b].before(a),this._items.splice(b,0,a),this._mergers.splice(b,0,1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:a,position:b})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},a.proxy(function(a,c){this.$element.on(a+".owl.carousel",b(c,a+".owl.carousel"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.$element.get(0))||(this.$element.addClass("owl-hidden"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr("src",f.src),e.css("opacity",1),c>=b.length&&(d.state.imagesLoaded=!0,d.initialize())},f.src=e.attr("src")||e.attr("data-src")||e.attr("data-src-retina")})},e.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&a(b).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var d in this._plugins)this._plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),a(c).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this._items.length,index:this.current()}},f=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),g=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.$element.trigger(g),this.settings&&"function"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data("owlCarousel")||a(this).data("owlCarousel",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var c=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,d=c.center&&Math.ceil(c.items/2)||c.items,e=c.center&&-1*d||0,f=(b.property&&b.property.value||this._core.current())+e,g=this._core.clones().length,h=a.proxy(function(a,b){this.load(b)},this);e++<d;)this.load(g/2+this._core.relative(f)),g&&a.each(this._core.clones(this._core.relative(f++)),h)},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={lazyLoad:!1},c.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":"url("+g+")",opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},c.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=c}(window.Zepto||window.jQuery,window,document),function(a){var b=function(c){this._core=c,this._handlers={"initialized.owl.carousel":a.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this._core.$element.on(this._handlers)};b.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},b.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},b.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=b}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this._core=b,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":a.proxy(function(a){this._core.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":a.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))},this)},this._core.options=a.extend({},d.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1},d.prototype.fetch=function(a,b){var c=a.attr("data-vimeo-id")?"vimeo":"youtube",d=a.attr("data-vimeo-id")||a.attr("data-youtube-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else{if(!(d[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");c="vimeo"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},d.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="http://img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type&&a.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}))},d.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},d.prototype.play=function(b){this._core.trigger("play",null,"video"),this._playing&&this.stop();var c,d,e=a(b.target||b.srcElement),f=e.closest("."+this._core.settings.itemClass),g=this._videos[f.attr("data-video")],h=g.width||"100%",i=g.height||this._core.$stage.height();"youtube"===g.type?c='<iframe width="'+h+'" height="'+i+'" src="http://www.youtube.com/embed/'+g.id+"?autoplay=1&v="+g.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===g.type&&(c='<iframe src="http://player.vimeo.com/video/'+g.id+'?autoplay=1" width="'+h+'" height="'+i+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),f.addClass("owl-video-playing"),this._playing=f,d=a('<div style="height:'+i+"px; width:"+h+'px" class="owl-video-frame">'+c+"</div>"),e.after(d)},d.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),d&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==b.orientation?(this._core.state.orientation=b.orientation,!1):!0},d.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=d}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){this.swapping="translated"==a.type},this),"translate.owl.carousel":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c)),f&&e.addClass("animated owl-animated-in").addClass(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this.core=b,this.core.options=a.extend({},d.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":a.proxy(function(){this.autoplay()
},this),"play.owl.autoplay":a.proxy(function(a,b,c){this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};d.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},d.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},d.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},d.prototype.stop=function(){b.clearInterval(this.interval)},d.prototype.pause=function(){b.clearInterval(this.interval)},d.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=d}(window.Zepto||window.jQuery,window,document),function(a){"use strict";var b=function(c){this._core=c,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.push(a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,0,a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":a.proxy(function(a){this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"change.owl.carousel":a.proxy(function(a){if("position"==a.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var b=this._core.current(),c=this._core.maximum(),d=this._core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}},this),"changed.owl.carousel":a.proxy(function(a){"position"==a.property.name&&this.draw()},this),"refreshed.owl.carousel":a.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this.$element.on(this._handlers)};b.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},b.prototype.initialize=function(){var b,c,d=this._core.settings;d.dotsData||(this._templates=[a("<div>").addClass(d.dotClass).append(a("<span>")).prop("outerHTML")]),d.navContainer&&d.dotsContainer||(this._controls.$container=a("<div>").addClass(d.controlsClass).appendTo(this.$element)),this._controls.$indicators=d.dotsContainer?a(d.dotsContainer):a("<div>").hide().addClass(d.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",a.proxy(function(b){var c=a(b.target).parent().is(this._controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a("<div>").addClass(d.navContainerClass).prependTo(this._controls.$container),this._controls.$next=a("<"+d.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on("click",a.proxy(function(){this.prev(d.navSpeed)},this)),this._controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on("click",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this._overrides)this._core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this._core.settings,e=this._core.clones().length/2,f=e+this._core.items().length,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if("page"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots||"page"==d.slideBy)for(this._pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this._pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this._core.mergers(this._core.relative(a))},b.prototype.draw=function(){var b,c,d="",e=this._core.settings,f=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!e.nav||e.loop||e.navRewind||(this._controls.$previous.toggleClass("disabled",0>=f),this._controls.$next.toggleClass("disabled",f>=this._core.maximum())),this._controls.$previous.toggle(e.nav),this._controls.$next.toggle(e.nav),e.dots){if(b=this._pages.length-this._controls.$indicators.children().length,e.dotData&&0!==b){for(c=0;c<this._controls.$indicators.children().length;c++)d+=this._templates[this._core.relative(c)];this._controls.$indicators.html(d)}else b>0?(d=new Array(b+1).join(this._templates[0]),this._controls.$indicators.append(d)):0>b&&this._controls.$indicators.children().slice(b).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(a.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items)}},b.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this._overrides.to,this._core)(b,c):(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b){"use strict";var c=function(d){this._core=d,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(){"URLHash"==this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[c]=b.content},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(){var a=b.location.hash.substring(1),c=this._core.$stage.children(),d=this._hashes[a]&&c.index(this._hashes[a])||0;return a?void this._core.to(d,!1,!0):!1},this))};c.Defaults={URLhashListener:!1},c.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=c}(window.Zepto||window.jQuery,window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5hanMuanMiLCJmaWxtY2hvb3Nlci5qcyIsImhlbHBlci5qcyIsIm1vZGVscy5qcyIsInJpcHBsZS5qcyIsInNlYXRtYXAuanMiLCJsaWIvanF1ZXJ5LnJpcHBsZS5qcyIsImxpYi9qcXVlcnkuc2xpbXNjcm9sbC5taW4uanMiLCJsaWIvb3dsLmNhcm91c2VsLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hNQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQ2luZU9zQXBwJywgWyd1aS5ib290c3RyYXAnXSk7XG5hcHAuY29udHJvbGxlcignUmVzZXJ2YXRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUucmVnaW9ucyA9IHJlZ2lvbnM7XG4gICAgICAgICRzY29wZS5jaW5lbWFzID0gY2luZW1hcztcbiAgICAgICAgJHNjb3BlLmZpbG1zID0gZmlsbXM7XG5cbiAgICAgICAgLypcdEV2ZW50IGhhbmRsZXJzXHQqL1xuICAgICAgICAkc2NvcGUudXNlckNyZWRlbnRpYWxzRW50ZXJlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9cdHZhbGlkYXRlXG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG8oJyNyZWdpb24tY2luZW1hLXNlY3Rpb24nLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnc3dpbmcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vXHR0aGVuIHNjcm9sbCBkb3duXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNjcm9sbFRvVXNlclJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvKCcjdXNlci1jcmVkZW50aWFscy1zZWN0aW9uJywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ3N3aW5nJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnJlZ2lvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDaW5lbWEgPSBjaW5lbWFzWzBdO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jaW5lbWFTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI2NpbmVtYS1kZXRhaWxzJykuc2xpZGVUb2dnbGUoe1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluUXVhZCcsXG4gICAgICAgICAgICAgICAgZG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNjaW5lbWEtc2VsZWN0aW9uLXllcy1uby1idXR0b25zJykuc2xpZGVUb2dnbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJblF1YWQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jaW5lbWFTZWxlY3Rpb25ObyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI2NpbmVtYS1zZWxlY3Rpb24teWVzLW5vLWJ1dHRvbnMnKS5zbGlkZVRvZ2dsZSh7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMCxcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5RdWFkJyxcbiAgICAgICAgICAgICAgICBkb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NpbmVtYS1kZXRhaWxzJykuc2xpZGVUb2dnbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJblF1YWQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnI3JlZ2lvbi1zZWxlY3QnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICQoJyNjaW5lbWEtc2VsZWN0JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAkKCcjeWVzLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ2luZW1hID0gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2luZW1hU2VsZWN0aW9uWWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjcmVnaW9uLXNlbGVjdCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKCcjY2luZW1hLXNlbGVjdCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKCcjeWVzLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vXHRNb3ZlIHRoZSB1c2VyIHRvIGZpbG0gc2VsZWN0aW9uXG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG8oJyNmaWxtLXNlbGVjdGlvbi1zZWN0aW9uJywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ3N3aW5nJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAvKlx0RW5kIGV2ZW50IGhhbmRsZXJzKi9cbiAgICB9XG5dKTtcblxuYXBwLmZpbHRlcignZmlsdGVyQ2luZW1hc0luU2VsZWN0ZWRSZWdpb24nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIHNlbGVjdGVkUmVnaW9uKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGlucHV0LCBmdW5jdGlvbihjaW5lbWEpIHtcbiAgICAgICAgICAgIGlmIChjaW5lbWEucmVnaW9uSWQgPT0gc2VsZWN0ZWRSZWdpb24uaWQpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChjaW5lbWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufSk7XG5cbi8qICBIZWxwZXIgRnVuY3Rpb25zICovXG5cbi8qKlxuICAgIFJldHVybnMgdGhlIGZpbG1zIHdoaWNoIGFyZSBiZWluZyBwbGF5ZWQgaW4gdGhlIHByb3ZpZGVkIGNpbmVtYSwgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHByb2plY3Rpb25zIGxpc3QuXG4qL1xuZnVuY3Rpb24gZ2V0RmlsbXNGb3JDaW5lbWEoY2luZW1hLCBwcm9qZWN0aW9ucywgZmlsbXMpIHtcbiAgICB2YXIgcHJvamVjdGlvbnNMZW5ndGggPSBwcm9qZWN0aW9ucy5sZW5ndGg7XG4gICAgLy8gIEZpbHRlciBvdXQgdGhlIHByb2plY3Rpb25zIHdoaWNoIGhhcHBlbiBpbiB0aGUgcHJvdmlkZWQgY2luZW1hO1xuICAgIHZhciBmb3VuZFByb2plY3Rpb25zID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2plY3Rpb25zTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBwcm9qZWN0aW9uc1tpXTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24uY2luZW1hSWQgPT0gY2luZW1hLmlkKSB7XG4gICAgICAgICAgICBmb3VuZFByb2plY3Rpb25zLnB1c2gocHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAgT25jZSB3ZSd2ZSBnb3QgdGhlIHByb2plY3Rpb25zLCBub3cgZmlsdGVyIG91dCB0aGUgZmlsbXMgd2hpY2ggYXJlIGJlaW5nIHBsYXllZCBpbiB0aGlzIHByb2plY3Rpb25zXG4gICAgLy8gIEp1c3QgbWFrZSBzdXJlIHRvIG9ubHkgY29udGFpbiBvbmUgcmVmZXJlbmNlIHRvIGEgZmlsbS5cbiAgICB2YXIgZmlsbXNSZXN1bHQgPSBbXTtcbiAgICBmaWxtcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbG0pIHtcbiAgICAgICAgZm91bmRQcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0aW9uLmZpbG1JZCA9PSBmaWxtLmlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkb2VzQXJyYXlDb250YWluKGZpbG1zUmVzdWx0LCBmaWxtKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxtc1Jlc3VsdC5wdXNoKGZpbG0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmlsbXNSZXN1bHQ7XG59IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGFuZHJldyBvbiAwMi8wNC8xNS5cbiAqL1xuJChmdW5jdGlvbigpe1xuICAgICQoJyNmaWxtc0xpc3QnKS5zbGltU2Nyb2xsKHtcbiAgICAgICAgaGVpZ2h0OiAnNTB2aCdcbiAgICB9KTtcbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSBhbmRyZXcgb24gMDIvMDQvMTUuXG4gKi9cbmZ1bmN0aW9uIGFkZENsYXNzKCBjbGFzc25hbWUsIGVsZW1lbnQgKSB7XG4gICAgdmFyIGNuID0gZWxlbWVudC5jbGFzc05hbWU7XG4gICAgLy90ZXN0IGZvciBleGlzdGFuY2VcbiAgICBpZiggY24uaW5kZXhPZiggY2xhc3NuYW1lICkgIT0gLTEgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9hZGQgYSBzcGFjZSBpZiB0aGUgZWxlbWVudCBhbHJlYWR5IGhhcyBjbGFzc1xuICAgIGlmKCBjbiAhPSAnJyApIHtcbiAgICAgICAgY2xhc3NuYW1lID0gJyAnK2NsYXNzbmFtZTtcbiAgICB9XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbitjbGFzc25hbWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKCBjbGFzc25hbWUsIGVsZW1lbnQgKSB7XG4gICAgdmFyIGNuID0gZWxlbWVudC5jbGFzc05hbWU7XG4gICAgdmFyIHJ4cCA9IG5ldyBSZWdFeHAoIFwiXFxcXHM/XFxcXGJcIitjbGFzc25hbWUrXCJcXFxcYlwiLCBcImdcIiApO1xuICAgIGNuID0gY24ucmVwbGFjZSggcnhwLCAnJyApO1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY247XG59XG5cbmZ1bmN0aW9uIGhhc0NsYXNzKGNsYXNzbmFtZSwgZWxlbWVudCl7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoIGNsYXNzbmFtZSApICE9IC0xO1xufVxuXG5cbmZ1bmN0aW9uIGRvZXNBcnJheUNvbnRhaW4oYXJyYXksIGVsZW1lbnQpIHtcbiAgICB2YXIgYXJyYXlMZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnJheVtpXSA9PT0gZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuIiwidmFyIGZpbG1zID0gW3tcbiAgICBpZDogMSxcbiAgICB0aXRsZTogXCJVcCFcIixcbiAgICBnZW5yZTogXCJBbmltYXRlZFwiLFxuICAgIGRpcmVjdG9yOiBcIkpvc3MgV2hlZG9uXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIG5lIGx1cHRhdHVtIHBoYWVkcnVtIHNpbmd1bGlzIHVzdS4gRXQgaGFzIGFuY2lsbGFlIGVwaWN1cmVpIGd1YmVyZ3Jlbi4gQW5pbWFsIGRldGVycnVpc3NldCBubyBuYW0uIEhhYmVtdXMgcG9zdHVsYW50IG5hbSB0ZS5RdW8gZXggYXRxdWkgdml0dXBlcmF0YSwgcHJvIG5lIGRlY29yZSBhY2N1c2FtdXMgY29uc3RpdHVhbSwgc2l0IG5vIGRpY2l0IHNhZXBlIGFsaXF1YW5kby4gRGVsZW5pdGkgZGVmaW5pdGlvbmVtIGN1IGhpcywgdmlzIGV1IHNlbXBlciBjb3Jwb3JhIGZhc3RpZGlpLiBDdW0gYXVkaWFtIGRlYml0aXMgYW5jaWxsYWUgZXQsIGVyYXQgenJpbCBlYSBtZWEuIElnbm90YSBmYWJ1bGFzIHZlbCBlYSwgaXBzdW0gdWxsdW0gdm9jZW50IGF0IGVzdC4gTmUgdmVuaWFtIGZ1aXNzZXQgdm9sdXB0dWEgcXVvLlwiLFxuICAgIGFjdG9yczogW3tcbiAgICAgICAgbmFtZTogXCJUb255IFN0YXJrXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiQnJ1Y2UgQmFubmVyXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiTmF0YXNoYSBSb21hbm92YVwiXG4gICAgfV0sXG4gICAgZXNyYjogXCJLaWRzXCIsXG4gICAgcG9zdGVycGF0aDogXCJpbWFnZXMvdXAhLmpwZ1wiXG59LCB7XG4gICAgaWQ6IDIsXG4gICAgdGl0bGU6IFwiSXJvbiBNYW5cIixcbiAgICBnZW5yZTogXCJTdXBlcmhlcm9cIixcbiAgICBkaXJlY3RvcjogXCJKb3NzIFdoZWRvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBuZSBsdXB0YXR1bSBwaGFlZHJ1bSBzaW5ndWxpcyB1c3UuIEV0IGhhcyBhbmNpbGxhZSBlcGljdXJlaSBndWJlcmdyZW4uIEFuaW1hbCBkZXRlcnJ1aXNzZXQgbm8gbmFtLiBIYWJlbXVzIHBvc3R1bGFudCBuYW0gdGUuUXVvIGV4IGF0cXVpIHZpdHVwZXJhdGEsIHBybyBuZSBkZWNvcmUgYWNjdXNhbXVzIGNvbnN0aXR1YW0sIHNpdCBubyBkaWNpdCBzYWVwZSBhbGlxdWFuZG8uIERlbGVuaXRpIGRlZmluaXRpb25lbSBjdSBoaXMsIHZpcyBldSBzZW1wZXIgY29ycG9yYSBmYXN0aWRpaS4gQ3VtIGF1ZGlhbSBkZWJpdGlzIGFuY2lsbGFlIGV0LCBlcmF0IHpyaWwgZWEgbWVhLiBJZ25vdGEgZmFidWxhcyB2ZWwgZWEsIGlwc3VtIHVsbHVtIHZvY2VudCBhdCBlc3QuIE5lIHZlbmlhbSBmdWlzc2V0IHZvbHVwdHVhIHF1by5cIixcbiAgICBhY3RvcnM6IFt7XG4gICAgICAgIG5hbWU6IFwiUm9iZXJ0IERvd25leSBKci5cIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJHd3luZXRoIFBhbHRyb3dcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJKZWZmIEJyaWRnZXNcIlxuICAgIH1dLFxuICAgIGVzcmI6IFwiS2lkc1wiLFxuICAgIHBvc3RlcnBhdGg6IFwiaW1hZ2VzL2lyb25tYW4uanBnXCJcbn0sIHtcbiAgICBpZDogMyxcbiAgICB0aXRsZTogXCJTdGFyIFdhcnMgSVY6IE5ldyBIb3BlXCIsXG4gICAgZ2VucmU6IFwiU2NpLUZpXCIsXG4gICAgZGlyZWN0b3I6IFwiR2VvcmdlIEx1Y2FzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIG5lIGx1cHRhdHVtIHBoYWVkcnVtIHNpbmd1bGlzIHVzdS4gRXQgaGFzIGFuY2lsbGFlIGVwaWN1cmVpIGd1YmVyZ3Jlbi4gQW5pbWFsIGRldGVycnVpc3NldCBubyBuYW0uIEhhYmVtdXMgcG9zdHVsYW50IG5hbSB0ZS5RdW8gZXggYXRxdWkgdml0dXBlcmF0YSwgcHJvIG5lIGRlY29yZSBhY2N1c2FtdXMgY29uc3RpdHVhbSwgc2l0IG5vIGRpY2l0IHNhZXBlIGFsaXF1YW5kby4gRGVsZW5pdGkgZGVmaW5pdGlvbmVtIGN1IGhpcywgdmlzIGV1IHNlbXBlciBjb3Jwb3JhIGZhc3RpZGlpLiBDdW0gYXVkaWFtIGRlYml0aXMgYW5jaWxsYWUgZXQsIGVyYXQgenJpbCBlYSBtZWEuIElnbm90YSBmYWJ1bGFzIHZlbCBlYSwgaXBzdW0gdWxsdW0gdm9jZW50IGF0IGVzdC4gTmUgdmVuaWFtIGZ1aXNzZXQgdm9sdXB0dWEgcXVvLlwiLFxuICAgIGFjdG9yczogW3tcbiAgICAgICAgbmFtZTogXCJNYXJrIEhhbWlsbFwiXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIkhhcnJpc29uIEZvcmRcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJLZW5ueSBCYWtlclwiXG4gICAgfV0sXG4gICAgZXNyYjogXCJLaWRzXCIsXG4gICAgcG9zdGVycGF0aDogXCJpbWFnZXMvbmV3aG9wZS5qcGdcIlxufSwge1xuICAgIGlkOiA0LFxuICAgIHRpdGxlOiBcIkxlcyBNaXNlcmFibGVzXCIsXG4gICAgZ2VucmU6IFwiTXVzaWNhbFwiLFxuICAgIGRpcmVjdG9yOiBcIkFsZmllIEJvd2VcIixcbiAgICBkZXNjcmlwdGlvbjogXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgbmUgbHVwdGF0dW0gcGhhZWRydW0gc2luZ3VsaXMgdXN1LiBFdCBoYXMgYW5jaWxsYWUgZXBpY3VyZWkgZ3ViZXJncmVuLiBBbmltYWwgZGV0ZXJydWlzc2V0IG5vIG5hbS4gSGFiZW11cyBwb3N0dWxhbnQgbmFtIHRlLlF1byBleCBhdHF1aSB2aXR1cGVyYXRhLCBwcm8gbmUgZGVjb3JlIGFjY3VzYW11cyBjb25zdGl0dWFtLCBzaXQgbm8gZGljaXQgc2FlcGUgYWxpcXVhbmRvLiBEZWxlbml0aSBkZWZpbml0aW9uZW0gY3UgaGlzLCB2aXMgZXUgc2VtcGVyIGNvcnBvcmEgZmFzdGlkaWkuIEN1bSBhdWRpYW0gZGViaXRpcyBhbmNpbGxhZSBldCwgZXJhdCB6cmlsIGVhIG1lYS4gSWdub3RhIGZhYnVsYXMgdmVsIGVhLCBpcHN1bSB1bGx1bSB2b2NlbnQgYXQgZXN0LiBOZSB2ZW5pYW0gZnVpc3NldCB2b2x1cHR1YSBxdW8uXCIsXG4gICAgYWN0b3JzOiBbe1xuICAgICAgICBuYW1lOiBcIkh1Z2ggSmFja21hblwiXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIkFubmUgSGF0aGF3YXlcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJSdXNzZWwgQ3Jvd2VcIlxuICAgIH1dLFxuICAgIGVzcmI6IFwiTWlkc1wiLFxuICAgIHBvc3RlcnBhdGg6IFwiaW1hZ2VzL2xlc21pc2VyYmxlcy5qcGdcIlxufSwge1xuICAgIGlkOiA1LFxuICAgIHRpdGxlOiBcIlB1bHAgRmljdGlvblwiLFxuICAgIGdlbnJlOiBcIlRocmlsbGVyXCIsXG4gICAgZGlyZWN0b3I6IFwiUXVlbnRpbiBUYXJhbnRpbm9cIixcbiAgICBkZXNjcmlwdGlvbjogXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgbmUgbHVwdGF0dW0gcGhhZWRydW0gc2luZ3VsaXMgdXN1LiBFdCBoYXMgYW5jaWxsYWUgZXBpY3VyZWkgZ3ViZXJncmVuLiBBbmltYWwgZGV0ZXJydWlzc2V0IG5vIG5hbS4gSGFiZW11cyBwb3N0dWxhbnQgbmFtIHRlLlF1byBleCBhdHF1aSB2aXR1cGVyYXRhLCBwcm8gbmUgZGVjb3JlIGFjY3VzYW11cyBjb25zdGl0dWFtLCBzaXQgbm8gZGljaXQgc2FlcGUgYWxpcXVhbmRvLiBEZWxlbml0aSBkZWZpbml0aW9uZW0gY3UgaGlzLCB2aXMgZXUgc2VtcGVyIGNvcnBvcmEgZmFzdGlkaWkuIEN1bSBhdWRpYW0gZGViaXRpcyBhbmNpbGxhZSBldCwgZXJhdCB6cmlsIGVhIG1lYS4gSWdub3RhIGZhYnVsYXMgdmVsIGVhLCBpcHN1bSB1bGx1bSB2b2NlbnQgYXQgZXN0LiBOZSB2ZW5pYW0gZnVpc3NldCB2b2x1cHR1YSBxdW8uXCIsXG4gICAgYWN0b3JzOiBbe1xuICAgICAgICBuYW1lOiBcIkpvaG4gVHJhdm9sdGFcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJTYW11ZWwgTC4gSmFja3NvblwiXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIkJydWNlIFdpbGxpc1wiXG4gICAgfV0sXG4gICAgZXNyYjogXCJNaWRzXCIsXG4gICAgcG9zdGVycGF0aDogXCJpbWFnZXMvcHVscGZpY3Rpb24uanBnXCJcbn0sIHtcbiAgICBpZDogNixcbiAgICB0aXRsZTogXCJIaXRjaGhpa2VyJ3MgR3VpZGUgdG8gR2FsYXh5XCIsXG4gICAgZ2VucmU6IFwiU2NpLUZpXCIsXG4gICAgZGlyZWN0b3I6IFwiR2FydGggSmVubmluZ3NcIixcbiAgICBkZXNjcmlwdGlvbjogXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgbmUgbHVwdGF0dW0gcGhhZWRydW0gc2luZ3VsaXMgdXN1LiBFdCBoYXMgYW5jaWxsYWUgZXBpY3VyZWkgZ3ViZXJncmVuLiBBbmltYWwgZGV0ZXJydWlzc2V0IG5vIG5hbS4gSGFiZW11cyBwb3N0dWxhbnQgbmFtIHRlLlF1byBleCBhdHF1aSB2aXR1cGVyYXRhLCBwcm8gbmUgZGVjb3JlIGFjY3VzYW11cyBjb25zdGl0dWFtLCBzaXQgbm8gZGljaXQgc2FlcGUgYWxpcXVhbmRvLiBEZWxlbml0aSBkZWZpbml0aW9uZW0gY3UgaGlzLCB2aXMgZXUgc2VtcGVyIGNvcnBvcmEgZmFzdGlkaWkuIEN1bSBhdWRpYW0gZGViaXRpcyBhbmNpbGxhZSBldCwgZXJhdCB6cmlsIGVhIG1lYS4gSWdub3RhIGZhYnVsYXMgdmVsIGVhLCBpcHN1bSB1bGx1bSB2b2NlbnQgYXQgZXN0LiBOZSB2ZW5pYW0gZnVpc3NldCB2b2x1cHR1YSBxdW8uXCIsXG4gICAgYWN0b3JzOiBbe1xuICAgICAgICBuYW1lOiBcIk1hcnRpbiBGcmVlbWFuXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiTW9zIERlZlwiXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIlpvb2V5IERlc2NoYW5lbFwiXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIlNhbSBSb2Nrd2VsbFwiXG4gICAgfV0sXG4gICAgZXNyYjogXCJNaWRzXCIsXG4gICAgcG9zdGVycGF0aDogXCJpbWFnZXMvaGl0Y2hoaWtlci5qcGdcIlxufV07XG5cbnZhciBwcm9qZWN0aW9ucyA9IFt7XG4gICAgaWQ6IDEsXG4gICAgY2luZW1hSWQ6IDEsXG4gICAgZmlsbUlkOiAxLFxuICAgIGRhdGV0aW1lOiBcIjIwMTUtMDctMTBUMTU6MzA6MDBcIlxufSwge1xuICAgIGlkOiAyLFxuICAgIGNpbmVtYUlkOiAxLFxuICAgIGZpbG1JZDogMixcbiAgICBkYXRldGltZTogXCIyMDE1LTA3LTEwVDE4OjMwOjAwXCJcbn0sIHtcbiAgICBpZDogMyxcbiAgICBjaW5lbWFJZDogMSxcbiAgICBmaWxtSWQ6IDMsXG4gICAgZGF0ZXRpbWU6IFwiMjAxNS0wNy0xMVQxNTozMDowMFwiXG59LCB7XG4gICAgaWQ6IDQsXG4gICAgY2luZW1hSWQ6IDEsXG4gICAgZmlsbUlkOiA0LFxuICAgIGRhdGV0aW1lOiBcIjIwMTUtMDctMTJUMTU6MzA6MDBcIlxufSwge1xuICAgIGlkOiA1LFxuICAgIGNpbmVtYUlkOiAyLFxuICAgIGZpbG1JZDogNSxcbiAgICBkYXRldGltZTogXCIyMDE1LTA3LTEwVDE1OjMwOjAwXCJcbn0sIHtcbiAgICBpZDogNixcbiAgICBjaW5lbWFJZDogMixcbiAgICBmaWxtSWQ6IDYsXG4gICAgZGF0ZXRpbWU6IFwiMjAxNS0wNy0xMFQxNTozMDowMFwiXG59LCB7XG4gICAgaWQ6IDcsXG4gICAgY2luZW1hSWQ6IDMsXG4gICAgZmlsbUlkOiAzLFxuICAgIGRhdGV0aW1lOiBcIjIwMTUtMDctMTBUMTU6MzA6MDBcIlxufSwge1xuICAgIGlkOiA4LFxuICAgIGNpbmVtYUlkOiAzLFxuICAgIGZpbG1JZDogNCxcbiAgICBkYXRldGltZTogXCIyMDE1LTA3LTEwVDE1OjMwOjAwXCJcbn0sIHtcbiAgICBpZDogOSxcbiAgICBjaW5lbWFJZDogNCxcbiAgICBmaWxtSWQ6IDEsXG4gICAgZGF0ZXRpbWU6IFwiMjAxNS0wNy0xMFQxNTozMDowMFwiXG59LCB7XG4gICAgaWQ6IDEwLFxuICAgIGNpbmVtYUlkOiA0LFxuICAgIGZpbG1JZDogNixcbiAgICBkYXRldGltZTogXCIyMDE1LTA3LTExVDE1OjMwOjAwXCJcbn1dO1xuXG52YXIgcmVnaW9ucyA9IFt7XG4gICAgaWQ6IDEsXG4gICAgcmVnaW9uTmFtZTogXCJFYXN0XCJcbn0sIHtcbiAgICBpZDogMixcbiAgICByZWdpb25OYW1lOiBcIldlc3RcIlxufSwge1xuICAgIGlkOiAzLFxuICAgIHJlZ2lvbk5hbWU6IFwiTm9ydGhcIlxufSwge1xuICAgIGlkOiA0LFxuICAgIHJlZ2lvbk5hbWU6IFwiU291dGhcIlxufV07XG5cbnZhciBjaW5lbWFzID0gW3tcbiAgICBpZDogMSxcbiAgICByZWdpb25JZDogMSxcbiAgICBjaW5lbWFOYW1lOiBcIk5pY2UgQ2luZW1hXCIsXG4gICAgYWRkcmVzczoge1xuICAgICAgICBjaXR5OiBcIldhcnNhd1wiLFxuICAgICAgICBzdHJlZXQ6IFwiMjAzNCBOaWNlIFN0cmVldFwiXG4gICAgfVxufSwge1xuICAgIGlkOiAyLFxuICAgIHJlZ2lvbklkOiAyLFxuICAgIGNpbmVtYU5hbWU6IFwiQmVzdCBDaW5lbWFcIixcbiAgICBhZGRyZXNzOiB7XG4gICAgICAgIGNpdHk6IFwiQ3JhY293XCIsXG4gICAgICAgIHN0cmVldDogXCIzNDUwIEJhZCBTdHJlZXRcIlxuICAgIH1cbn0sIHtcbiAgICBpZDogMyxcbiAgICByZWdpb25JZDogMyxcbiAgICBjaW5lbWFOYW1lOiBcIkZyaWVuZGx5IENpbmVtYVwiLFxuICAgIGFkZHJlc3M6IHtcbiAgICAgICAgY2l0eTogXCJEYW56aWdcIixcbiAgICAgICAgc3RyZWV0OiBcIjFzdCBBbGxleVwiXG4gICAgfVxufSwge1xuICAgIGlkOiA0LFxuICAgIHJlZ2lvbklkOiA0LFxuICAgIGNpbmVtYU5hbWU6IFwiU2Vjb25kIEJlc3QgQ2luZW1hXCIsXG4gICAgYWRkcmVzczoge1xuICAgICAgICBjaXR5OiBcIlN0ZXR0aW5cIixcbiAgICAgICAgc3RyZWV0OiBcIjM0IFdvcnN0IFN0cmVldFwiXG4gICAgfVxufV07XG5cbnZhciBzZWF0cyA9IFtcbiAgICBbZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXSxcbiAgICBbZmFsc2UsIHRydWUsIGZhbHNlLCB0cnVlLCBmYWxzZV0sXG4gICAgW3RydWUsIGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2VdLFxuICAgIFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2VdLFxuICAgIFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2VdXG5dOyIsIiQoJy5yaXBwbGUnKS5yaXBwbGUoKTtcbiIsImZ1bmN0aW9uIGNyZWF0ZVRhYmxlKHNlYXRNYXRyaXgpIHtcbiAgICAvLyAgQ3JlYXRlIEEgdGFibGVcbiAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgIHRhYmxlLmNsYXNzTmFtZSA9ICd0YWJsZSc7ICAvLyAgQWRkIGJvb3RzdHJhcCBjbGFzcyB0byB0YWJsZVxuXG4gICAgdmFyIHRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XG5cbiAgICB2YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuXG4gICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJykpO1xuICAgIC8vICBBYm92ZSBhZGRzIGFuIGVtcHR5IGNlbGwgd2hlcmUgY29sdW1uIG51bWJlciBhbmQgcm93IG51bWJlciBsaXN0aW5ncyBpbnRlcnNlY3QuXG5cbiAgICAvLyAgQ291bnQgaG93IG1hbnkgY29sdW1ucyB0aGVyZSBhcmUgaW4gdGhlIHNlYXRNYXRyaXggYW5kIHRoZW4gaW5zZXJ0IHRoZSBmaXJzdCByb3cgY29udGFpbmluZyBjb2x1bW4gbnVtYmVyc1xuICAgIHZhciBjb2xDb3VudCA9IHNlYXRNYXRyaXhbMF0ubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDE7IGkgPD0gY29sQ291bnQ7IGkrKylcbiAgICB7XG4gICAgICAgIHZhciBoZWFkZXJDb2x1bW5OdW1iZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgaGVhZGVyQ29sdW1uTnVtYmVyQ2VsbC5pbm5lckhUTUwgPSBpO1xuICAgICAgICBoZWFkZXJDb2x1bW5OdW1iZXJDZWxsLmNsYXNzTmFtZSA9ICd0ZXh0LWNlbnRlcic7XG4gICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZChoZWFkZXJDb2x1bW5OdW1iZXJDZWxsKTtcbiAgICB9XG5cbiAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcblxuICAgIHZhciByb3dDb3VudCA9IHNlYXRNYXRyaXgubGVuZ3RoO1xuICAgIGZvcih2YXIgcm93TnVtYmVyID0gMTsgcm93TnVtYmVyIDw9IHJvd0NvdW50OyByb3dOdW1iZXIrKylcbiAgICB7XG4gICAgICAgIHZhciByb3cgPSBjcmVhdGVSb3coc2VhdE1hdHJpeFtyb3dOdW1iZXItMV0sIHJvd051bWJlcik7XG4gICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdGFibGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJvdyhzZWF0Um93QXJyYXksIHJvd051bWJlcikge1xuICAgIHZhciB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICB2YXIgc2VhdFJvd0FycmF5TGVuZ3RoID0gc2VhdFJvd0FycmF5Lmxlbmd0aDtcblxuICAgIHZhciByb3dOdW1iZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICByb3dOdW1iZXJDZWxsLmlubmVySFRNTCA9IHJvd051bWJlcjtcbiAgICB0ci5hcHBlbmRDaGlsZChyb3dOdW1iZXJDZWxsKTtcbiAgICBmb3IodmFyIGNvbHVtbk51bWJlciA9IDE7IGNvbHVtbk51bWJlciA8PSBzZWF0Um93QXJyYXlMZW5ndGg7IGNvbHVtbk51bWJlciArKylcbiAgICB7XG4gICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgIHZhciBzZWF0QnV0dG9uID0gY3JlYXRlU2VhdEJ1dHRvbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByb3c6IHJvd051bWJlciwgY29sOiBjb2x1bW5OdW1iZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWF0Um93QXJyYXlbY29sdW1uTnVtYmVyLTFdLFxuICAgICAgICAgICAgJ3NlYXQtYnRuIGJ0biBidG4tZGVmYXVsdCBidG4tYmxvY2snKTtcbiAgICAgICAgdGQuYXBwZW5kQ2hpbGQoc2VhdEJ1dHRvbik7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlYXRCdXR0b24ocG9zaXRpb24sIGlzQm9va2VkLCBjc3NDbGFzc2VzKSB7XG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgIGJ1dHRvbi5kYXRhc2V0LnBvc2l0aW9uID0gcG9zaXRpb24ucm93ICsgJ18nICsgcG9zaXRpb24uY29sO1xuICAgIGJ1dHRvbi5kYXRhc2V0LmlzYm9va2VkID0gaXNCb29rZWQ7XG4gICAgaWYoaXNCb29rZWQpXG4gICAge1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICBidXR0b24uY2xhc3NOYW1lICs9IFwiIGdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCI7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgKz0gXCIgZ2x5cGhpY29uIGdseXBoaWNvbi1hc3Rlcmlza1wiO1xuICAgICAgICBidXR0b24uZGF0YXNldC5zZWxlY3RlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpe3NlYXRCdXR0b25PbkNsaWNrKGV2ZW50KX07XG5cbiAgICByZXR1cm4gYnV0dG9uO1xufVxuXG5mdW5jdGlvbiBzZWF0QnV0dG9uT25DbGljayAoZXZlbnQpe1xuICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgdmFyIGlzU2VsZWN0ZWQgPSB0YXJnZXQuZGF0YXNldC5zZWxlY3RlZDtcblxuICAgIGlmKGlzU2VsZWN0ZWQgPT09IFwiZmFsc2VcIilcbiAgICB7XG4gICAgICAgIGFkZENsYXNzKHByZXNzZWRDbGFzc05hbWUsIHRhcmdldCk7XG4gICAgICAgIHJlbW92ZUNsYXNzKGRlZmF1bHRDbGFzc05hbWUsIHRhcmdldCk7XG4gICAgICAgIGFkZENsYXNzKHNlbGVjdGVkQ2xhc3NOYW1lLCB0YXJnZXQpO1xuICAgICAgICByZW1vdmVDbGFzcyhhdmFpbGFibGVHSUNsYXNzTmFtZSwgdGFyZ2V0KTtcbiAgICAgICAgYWRkQ2xhc3Moc2VsZWN0ZWRHSUNsYXNzTmFtZSwgdGFyZ2V0KTtcbiAgICAgICAgdGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBcInRydWVcIjtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3MocHJlc3NlZENsYXNzTmFtZSwgdGFyZ2V0KTtcbiAgICAgICAgcmVtb3ZlQ2xhc3Moc2VsZWN0ZWRDbGFzc05hbWUsIHRhcmdldCk7XG4gICAgICAgIGFkZENsYXNzKGRlZmF1bHRDbGFzc05hbWUsIHRhcmdldCk7XG4gICAgICAgIGFkZENsYXNzKGF2YWlsYWJsZUdJQ2xhc3NOYW1lLCB0YXJnZXQpO1xuICAgICAgICByZW1vdmVDbGFzcyhzZWxlY3RlZEdJQ2xhc3NOYW1lLCB0YXJnZXQpO1xuICAgICAgICB0YXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IFwiZmFsc2VcIlxuICAgIH1cbn1cbi8qICBIZWxwZXIgZGVmaW5pdGlvbnMgICovXG52YXIgcHJlc3NlZENsYXNzTmFtZSA9ICdhY3RpdmUnO1xudmFyIHNlbGVjdGVkQ2xhc3NOYW1lID0gJ2J0bi1zdWNjZXNzJztcbnZhciBkZWZhdWx0Q2xhc3NOYW1lID0gJ2J0bi1kZWZhdWx0JztcbnZhciBhdmFpbGFibGVHSUNsYXNzTmFtZSA9ICdnbHlwaGljb24tYXN0ZXJpc2snO1xudmFyIHNlbGVjdGVkR0lDbGFzc05hbWUgPSAnZ2x5cGhpY29uLW9rJztcblxuLyogIEVuZCBvZiBoZWxwZXIgZGVmaW5pdGlvbnMgICAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgIHZhciB0YWJsZSA9IGNyZWF0ZVRhYmxlKHNlYXRzKTtcbiAgICAkKCcjc2VhdC1tYXAnKS5hcHBlbmQodGFibGUpO1xufSk7IiwiLyoqXG4gKiBqUXVlcnkgcGx1Z2luIHRvIHByb2R1Y2UgdGhlIHJpcHBsZSBlZmZlY3QgZnJvbSB0aGUgR29vZ2xlIE1hdGVyaWFsIERlc2lnbiBzcGVjOlxuICogaHR0cDovL3d3dy5nb29nbGUuY29tL2Rlc2lnbi9zcGVjL2FuaW1hdGlvbi9yZXNwb25zaXZlLWludGVyYWN0aW9uLmh0bWxcbiAqXG4gKiBUaGlzIHBsdWdpbiB3YXMgbW9kaWZpZWQgZnJvbSBhIGNvZGVwZW4gc2ltdWxhdGluZyB0aGUgZWZmZWN0OlxuICogaHR0cDovL2NvZGVwZW4uaW8vQ3JhaWd0dXQvcGVuL2RJZnp2XG4gKi9cbihmdW5jdGlvbigkLCB1YSkge1xuXG4gICAgdmFyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmVmZXJlbmNlXG4gICAgICAgIHRpbWVyID0gbnVsbCxcblxuICAgICAgICAvLyBCZXR0ZXIgdGVzdGluZyBvZiB0b3VjaCBzdXBwb3J0XG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbmdyeW1hbi9qcXVlcnkuZmluZ2VyL2Jsb2IvdjAuMS4yL2Rpc3QvanF1ZXJ5LmZpbmdlci5qcyNMN1xuICAgICAgICBpc0Nocm9tZSA9IC9jaHJvbWUvaS5leGVjKHVhKSxcbiAgICAgICAgaXNBbmRyb2lkID0gL2FuZHJvaWQvaS5leGVjKHVhKSxcbiAgICAgICAgaGFzVG91Y2ggPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgJiYgIShpc0Nocm9tZSAmJiAhaXNBbmRyb2lkKSxcblxuICAgICAgICAvLyBOb3RpZnkgYXBwbGljYXRpb25zIG9mIHRoZSByaXBwbGUgZWZmZWN0XG4gICAgICAgIHNldFJpcHBsZSA9IGZ1bmN0aW9uKCRwYXBlcikge1xuICAgICAgICAgICAgaWYgKCEkcGFwZXIuZGF0YSgncmlwcGxlJykpIHtcbiAgICAgICAgICAgICAgICAkcGFwZXJcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3JpcHBsZScsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIC50cmlnZ2VyKCdyaXBwbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIC8qKlxuICAgICAqIGpRdWVyeS5mbi5yaXBwbGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5jb2xvcj0jZmZmXSBUaGUgcmlwcGxlIGVmZmVjdCBjb2xvclxuICAgICAqL1xuICAgICQuZm4ucmlwcGxlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCB7IGNvbG9yOiAnI2ZmZicgfSwgb3B0aW9ucyk7XG4gICAgICAgIG9wdHMuZXZlbnQgPSAoaGFzVG91Y2ggJiYgJ3RvdWNoc3RhcnQucmlwcGxlJykgfHwgJ21vdXNlZG93bi5yaXBwbGUnO1xuICAgICAgICBvcHRzLmVuZF9ldmVudCA9IChoYXNUb3VjaCAmJiAndG91Y2hlbmQucmlwcGxlIG1vdXNlbGVhdmUucmlwcGxlJykgfHwgJ21vdXNldXAucmlwcGxlJztcblxuICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAvLyBCaW5kIHRoZSBldmVudCB0byBydW4gdGhlIGVmZmVjdFxuICAgICAgICAgICAgLm9uKG9wdHMuZXZlbnQsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHgsIHksIHRvdWNoX2V2LFxuICAgICAgICAgICAgICAgICAgICAkcGFwZXIgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkaW5rID0gJCgnPGRpdi8+JyksXG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSBNYXRoLm1heCgkcGFwZXIud2lkdGgoKSwgJHBhcGVyLmhlaWdodCgpKTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB1cCByaXBwbGUgZWZmZWN0IHN0eWxlc1xuICAgICAgICAgICAgICAgICRwYXBlclxuICAgICAgICAgICAgICAgICAgICAudHJpZ2dlcignYmVmb3JlcmlwcGxlJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdyaXBwbGUtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJGlua1xuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3JpcHBsZS1lZmZlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKHtoZWlnaHQ6IHNpemUsIHdpZHRoOiBzaXplfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgY2xpY2sgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgICAgICAvLyBsb2dpYyA9IGNsaWNrIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHBhZ2VcbiAgICAgICAgICAgICAgICAvLyAtIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhZ2UgLSBoYWxmIG9mIHNlbGYgaGVpZ2h0L3dpZHRoIHRvIG1ha2UgaXQgY29udHJvbGxhYmxlIGZyb20gdGhlIGNlbnRlclxuICAgICAgICAgICAgICAgIHRvdWNoX2V2ID0gaGFzVG91Y2ggPyBldi5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gOiBldjtcbiAgICAgICAgICAgICAgICB4ID0gdG91Y2hfZXYucGFnZVggLSAkcGFwZXIub2Zmc2V0KCkubGVmdCAtICRpbmsud2lkdGgoKS8yO1xuICAgICAgICAgICAgICAgIHkgPSB0b3VjaF9ldi5wYWdlWSAtICRwYXBlci5vZmZzZXQoKS50b3AgLSAkaW5rLmhlaWdodCgpLzI7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgdXAgcmlwcGxlIHBvc2l0aW9uIGFuZCBwbGFjZSBpdCBpbiB0aGUgRE9NXG4gICAgICAgICAgICAgICAgJGlua1xuICAgICAgICAgICAgICAgICAgICAuY3NzKHt0b3A6IHkgKyAncHgnLCBsZWZ0OiB4ICsgJ3B4JywgYmFja2dyb3VuZENvbG9yOiBvcHRzLmNvbG9yfSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRwYXBlcik7XG5cbiAgICAgICAgICAgICAgICAvLyBEZWxheWVkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHNldFJpcHBsZSgkcGFwZXIpOyB9LCAyMDAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBCaW5kIHRoZSBldmVudCB0byBlbmQgdGhlIHBhcGVyLXByZXNzIHJpcHBsZVxuICAgICAgICAgICAgLm9uKG9wdHMuZW5kX2V2ZW50LCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIHZhciAkcGFwZXIgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkaW5rID0gJHBhcGVyLmZpbmQoJy5yaXBwbGUtZWZmZWN0Jyk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSByaXBwbGUgaWYgd2UgaGFkbid0IHlldFxuICAgICAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHNldFJpcHBsZSgkcGFwZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSByaXBwbGUgZWZmZWN0IHN0eWxlc1xuICAgICAgICAgICAgICAgICRwYXBlclxuICAgICAgICAgICAgICAgICAgICAudHJpZ2dlcignYWZ0ZXJyaXBwbGUnKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3JpcHBsZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkaW5rXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe2JhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J30pXG4gICAgICAgICAgICAgICAgICAgIC5vbmUoJ3dlYmtpdFRyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgbXNUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbmsucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFwZXIucmVtb3ZlRGF0YSgncmlwcGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2hhaW5pbmdcbiAgICAgICAgcmV0dXJuICQodGhpcyk7XG4gICAgfTtcblxufSh3aW5kb3cualF1ZXJ5LCBuYXZpZ2F0b3IudXNlckFnZW50KSk7XG4iLCIvKiEgQ29weXJpZ2h0IChjKSAyMDExIFBpb3RyIFJvY2hhbGEgKGh0dHA6Ly9yb2NoYS5sYSlcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKiBhbmQgR1BMIChodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL2dwbC1saWNlbnNlLnBocCkgbGljZW5zZXMuXG4gKlxuICogVmVyc2lvbjogMS4zLjBcbiAqXG4gKi9cbihmdW5jdGlvbihmKXtqUXVlcnkuZm4uZXh0ZW5kKHtzbGltU2Nyb2xsOmZ1bmN0aW9uKGgpe3ZhciBhPWYuZXh0ZW5kKHt3aWR0aDpcImF1dG9cIixoZWlnaHQ6XCIyNTBweFwiLHNpemU6XCI3cHhcIixjb2xvcjpcIiMwMDBcIixwb3NpdGlvbjpcInJpZ2h0XCIsZGlzdGFuY2U6XCIxcHhcIixzdGFydDpcInRvcFwiLG9wYWNpdHk6MC40LGFsd2F5c1Zpc2libGU6ITEsZGlzYWJsZUZhZGVPdXQ6ITEscmFpbFZpc2libGU6ITEscmFpbENvbG9yOlwiIzMzM1wiLHJhaWxPcGFjaXR5OjAuMixyYWlsRHJhZ2dhYmxlOiEwLHJhaWxDbGFzczpcInNsaW1TY3JvbGxSYWlsXCIsYmFyQ2xhc3M6XCJzbGltU2Nyb2xsQmFyXCIsd3JhcHBlckNsYXNzOlwic2xpbVNjcm9sbERpdlwiLGFsbG93UGFnZVNjcm9sbDohMSx3aGVlbFN0ZXA6MjAsdG91Y2hTY3JvbGxTdGVwOjIwMCxib3JkZXJSYWRpdXM6XCI3cHhcIixyYWlsQm9yZGVyUmFkaXVzOlwiN3B4XCJ9LGgpO3RoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZCl7aWYocyl7ZD1kfHxcbndpbmRvdy5ldmVudDt2YXIgYz0wO2Qud2hlZWxEZWx0YSYmKGM9LWQud2hlZWxEZWx0YS8xMjApO2QuZGV0YWlsJiYoYz1kLmRldGFpbC8zKTtmKGQudGFyZ2V0fHxkLnNyY1RhcmdldHx8ZC5zcmNFbGVtZW50KS5jbG9zZXN0KFwiLlwiK2Eud3JhcHBlckNsYXNzKS5pcyhiLnBhcmVudCgpKSYmbShjLCEwKTtkLnByZXZlbnREZWZhdWx0JiYhayYmZC5wcmV2ZW50RGVmYXVsdCgpO2t8fChkLnJldHVyblZhbHVlPSExKX19ZnVuY3Rpb24gbShkLGYsaCl7az0hMTt2YXIgZT1kLGc9Yi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKTtmJiYoZT1wYXJzZUludChjLmNzcyhcInRvcFwiKSkrZCpwYXJzZUludChhLndoZWVsU3RlcCkvMTAwKmMub3V0ZXJIZWlnaHQoKSxlPU1hdGgubWluKE1hdGgubWF4KGUsMCksZyksZT0wPGQ/TWF0aC5jZWlsKGUpOk1hdGguZmxvb3IoZSksYy5jc3Moe3RvcDplK1wicHhcIn0pKTtsPXBhcnNlSW50KGMuY3NzKFwidG9wXCIpKS8oYi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKSk7XG5lPWwqKGJbMF0uc2Nyb2xsSGVpZ2h0LWIub3V0ZXJIZWlnaHQoKSk7aCYmKGU9ZCxkPWUvYlswXS5zY3JvbGxIZWlnaHQqYi5vdXRlckhlaWdodCgpLGQ9TWF0aC5taW4oTWF0aC5tYXgoZCwwKSxnKSxjLmNzcyh7dG9wOmQrXCJweFwifSkpO2Iuc2Nyb2xsVG9wKGUpO2IudHJpZ2dlcihcInNsaW1zY3JvbGxpbmdcIix+fmUpO3YoKTtwKCl9ZnVuY3Rpb24gQygpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyPyh0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Nb3VzZVNjcm9sbFwiLHIsITEpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIixyLCExKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCIsciwhMSkpOmRvY3VtZW50LmF0dGFjaEV2ZW50KFwib25tb3VzZXdoZWVsXCIscil9ZnVuY3Rpb24gdygpe3U9TWF0aC5tYXgoYi5vdXRlckhlaWdodCgpL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSxEKTtjLmNzcyh7aGVpZ2h0OnUrXCJweFwifSk7XG52YXIgYT11PT1iLm91dGVySGVpZ2h0KCk/XCJub25lXCI6XCJibG9ja1wiO2MuY3NzKHtkaXNwbGF5OmF9KX1mdW5jdGlvbiB2KCl7dygpO2NsZWFyVGltZW91dChBKTtsPT1+fmw/KGs9YS5hbGxvd1BhZ2VTY3JvbGwsQiE9bCYmYi50cmlnZ2VyKFwic2xpbXNjcm9sbFwiLDA9PX5+bD9cInRvcFwiOlwiYm90dG9tXCIpKTprPSExO0I9bDt1Pj1iLm91dGVySGVpZ2h0KCk/az0hMDooYy5zdG9wKCEwLCEwKS5mYWRlSW4oXCJmYXN0XCIpLGEucmFpbFZpc2libGUmJmcuc3RvcCghMCwhMCkuZmFkZUluKFwiZmFzdFwiKSl9ZnVuY3Rpb24gcCgpe2EuYWx3YXlzVmlzaWJsZXx8KEE9c2V0VGltZW91dChmdW5jdGlvbigpe2EuZGlzYWJsZUZhZGVPdXQmJnN8fCh4fHx5KXx8KGMuZmFkZU91dChcInNsb3dcIiksZy5mYWRlT3V0KFwic2xvd1wiKSl9LDFFMykpfXZhciBzLHgseSxBLHosdSxsLEIsRD0zMCxrPSExLGI9Zih0aGlzKTtpZihiLnBhcmVudCgpLmhhc0NsYXNzKGEud3JhcHBlckNsYXNzKSl7dmFyIG49Yi5zY3JvbGxUb3AoKSxcbmM9Yi5wYXJlbnQoKS5maW5kKFwiLlwiK2EuYmFyQ2xhc3MpLGc9Yi5wYXJlbnQoKS5maW5kKFwiLlwiK2EucmFpbENsYXNzKTt3KCk7aWYoZi5pc1BsYWluT2JqZWN0KGgpKXtpZihcImhlaWdodFwiaW4gaCYmXCJhdXRvXCI9PWguaGVpZ2h0KXtiLnBhcmVudCgpLmNzcyhcImhlaWdodFwiLFwiYXV0b1wiKTtiLmNzcyhcImhlaWdodFwiLFwiYXV0b1wiKTt2YXIgcT1iLnBhcmVudCgpLnBhcmVudCgpLmhlaWdodCgpO2IucGFyZW50KCkuY3NzKFwiaGVpZ2h0XCIscSk7Yi5jc3MoXCJoZWlnaHRcIixxKX1pZihcInNjcm9sbFRvXCJpbiBoKW49cGFyc2VJbnQoYS5zY3JvbGxUbyk7ZWxzZSBpZihcInNjcm9sbEJ5XCJpbiBoKW4rPXBhcnNlSW50KGEuc2Nyb2xsQnkpO2Vsc2UgaWYoXCJkZXN0cm95XCJpbiBoKXtjLnJlbW92ZSgpO2cucmVtb3ZlKCk7Yi51bndyYXAoKTtyZXR1cm59bShuLCExLCEwKX19ZWxzZXthLmhlaWdodD1cImF1dG9cIj09YS5oZWlnaHQ/Yi5wYXJlbnQoKS5oZWlnaHQoKTphLmhlaWdodDtuPWYoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhhLndyYXBwZXJDbGFzcykuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsXG5vdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0fSk7Yi5jc3Moe292ZXJmbG93OlwiaGlkZGVuXCIsd2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHR9KTt2YXIgZz1mKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoYS5yYWlsQ2xhc3MpLmNzcyh7d2lkdGg6YS5zaXplLGhlaWdodDpcIjEwMCVcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjAsZGlzcGxheTphLmFsd2F5c1Zpc2libGUmJmEucmFpbFZpc2libGU/XCJibG9ja1wiOlwibm9uZVwiLFwiYm9yZGVyLXJhZGl1c1wiOmEucmFpbEJvcmRlclJhZGl1cyxiYWNrZ3JvdW5kOmEucmFpbENvbG9yLG9wYWNpdHk6YS5yYWlsT3BhY2l0eSx6SW5kZXg6OTB9KSxjPWYoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhhLmJhckNsYXNzKS5jc3Moe2JhY2tncm91bmQ6YS5jb2xvcix3aWR0aDphLnNpemUscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLG9wYWNpdHk6YS5vcGFjaXR5LGRpc3BsYXk6YS5hbHdheXNWaXNpYmxlP1xuXCJibG9ja1wiOlwibm9uZVwiLFwiYm9yZGVyLXJhZGl1c1wiOmEuYm9yZGVyUmFkaXVzLEJvcmRlclJhZGl1czphLmJvcmRlclJhZGl1cyxNb3pCb3JkZXJSYWRpdXM6YS5ib3JkZXJSYWRpdXMsV2Via2l0Qm9yZGVyUmFkaXVzOmEuYm9yZGVyUmFkaXVzLHpJbmRleDo5OX0pLHE9XCJyaWdodFwiPT1hLnBvc2l0aW9uP3tyaWdodDphLmRpc3RhbmNlfTp7bGVmdDphLmRpc3RhbmNlfTtnLmNzcyhxKTtjLmNzcyhxKTtiLndyYXAobik7Yi5wYXJlbnQoKS5hcHBlbmQoYyk7Yi5wYXJlbnQoKS5hcHBlbmQoZyk7YS5yYWlsRHJhZ2dhYmxlJiZjLmJpbmQoXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXt2YXIgYj1mKGRvY3VtZW50KTt5PSEwO3Q9cGFyc2VGbG9hdChjLmNzcyhcInRvcFwiKSk7cGFnZVk9YS5wYWdlWTtiLmJpbmQoXCJtb3VzZW1vdmUuc2xpbXNjcm9sbFwiLGZ1bmN0aW9uKGEpe2N1cnJUb3A9dCthLnBhZ2VZLXBhZ2VZO2MuY3NzKFwidG9wXCIsY3VyclRvcCk7bSgwLGMucG9zaXRpb24oKS50b3AsITEpfSk7XG5iLmJpbmQoXCJtb3VzZXVwLnNsaW1zY3JvbGxcIixmdW5jdGlvbihhKXt5PSExO3AoKTtiLnVuYmluZChcIi5zbGltc2Nyb2xsXCIpfSk7cmV0dXJuITF9KS5iaW5kKFwic2VsZWN0c3RhcnQuc2xpbXNjcm9sbFwiLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCk7YS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiExfSk7Zy5ob3ZlcihmdW5jdGlvbigpe3YoKX0sZnVuY3Rpb24oKXtwKCl9KTtjLmhvdmVyKGZ1bmN0aW9uKCl7eD0hMH0sZnVuY3Rpb24oKXt4PSExfSk7Yi5ob3ZlcihmdW5jdGlvbigpe3M9ITA7digpO3AoKX0sZnVuY3Rpb24oKXtzPSExO3AoKX0pO2IuYmluZChcInRvdWNoc3RhcnRcIixmdW5jdGlvbihhLGIpe2Eub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmKHo9YS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpfSk7Yi5iaW5kKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oYil7a3x8Yi5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7Yi5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoJiZcbihtKCh6LWIub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZKS9hLnRvdWNoU2Nyb2xsU3RlcCwhMCksej1iLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSl9KTt3KCk7XCJib3R0b21cIj09PWEuc3RhcnQ/KGMuY3NzKHt0b3A6Yi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKX0pLG0oMCwhMCkpOlwidG9wXCIhPT1hLnN0YXJ0JiYobShmKGEuc3RhcnQpLnBvc2l0aW9uKCkudG9wLG51bGwsITApLGEuYWx3YXlzVmlzaWJsZXx8Yy5oaWRlKCkpO0MoKX19KTtyZXR1cm4gdGhpc319KTtqUXVlcnkuZm4uZXh0ZW5kKHtzbGltc2Nyb2xsOmpRdWVyeS5mbi5zbGltU2Nyb2xsfSl9KShqUXVlcnkpOyIsIiFmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGIsYyl7dGhpcy5zZXR0aW5ncz1udWxsLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLGMpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLmRyYWc9YS5leHRlbmQoe30sbSksdGhpcy5zdGF0ZT1hLmV4dGVuZCh7fSxuKSx0aGlzLmU9YS5leHRlbmQoe30sbyksdGhpcy5fcGx1Z2lucz17fSx0aGlzLl9zdXByZXNzPXt9LHRoaXMuX2N1cnJlbnQ9bnVsbCx0aGlzLl9zcGVlZD1udWxsLHRoaXMuX2Nvb3JkaW5hdGVzPVtdLHRoaXMuX2JyZWFrcG9pbnQ9bnVsbCx0aGlzLl93aWR0aD1udWxsLHRoaXMuX2l0ZW1zPVtdLHRoaXMuX2Nsb25lcz1bXSx0aGlzLl9tZXJnZXJzPVtdLHRoaXMuX2ludmFsaWRhdGVkPXt9LHRoaXMuX3BpcGU9W10sYS5lYWNoKGUuUGx1Z2lucyxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5fcGx1Z2luc1thWzBdLnRvTG93ZXJDYXNlKCkrYS5zbGljZSgxKV09bmV3IGIodGhpcyl9LHRoaXMpKSxhLmVhY2goZS5QaXBlLGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLl9waXBlLnB1c2goe2ZpbHRlcjpjLmZpbHRlcixydW46YS5wcm94eShjLnJ1bix0aGlzKX0pfSx0aGlzKSksdGhpcy5zZXR1cCgpLHRoaXMuaW5pdGlhbGl6ZSgpfWZ1bmN0aW9uIGYoYSl7aWYoYS50b3VjaGVzIT09ZClyZXR1cm57eDphLnRvdWNoZXNbMF0ucGFnZVgseTphLnRvdWNoZXNbMF0ucGFnZVl9O2lmKGEudG91Y2hlcz09PWQpe2lmKGEucGFnZVghPT1kKXJldHVybnt4OmEucGFnZVgseTphLnBhZ2VZfTtpZihhLnBhZ2VYPT09ZClyZXR1cm57eDphLmNsaWVudFgseTphLmNsaWVudFl9fX1mdW5jdGlvbiBnKGEpe3ZhciBiLGQsZT1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZj1hO2ZvcihiIGluIGYpaWYoZD1mW2JdLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLnN0eWxlW2RdKXJldHVybiBlPW51bGwsW2QsYl07cmV0dXJuWyExXX1mdW5jdGlvbiBoKCl7cmV0dXJuIGcoW1widHJhbnNpdGlvblwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIl0pWzFdfWZ1bmN0aW9uIGkoKXtyZXR1cm4gZyhbXCJ0cmFuc2Zvcm1cIixcIldlYmtpdFRyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJPVHJhbnNmb3JtXCIsXCJtc1RyYW5zZm9ybVwiXSlbMF19ZnVuY3Rpb24gaigpe3JldHVybiBnKFtcInBlcnNwZWN0aXZlXCIsXCJ3ZWJraXRQZXJzcGVjdGl2ZVwiLFwiTW96UGVyc3BlY3RpdmVcIixcIk9QZXJzcGVjdGl2ZVwiLFwiTXNQZXJzcGVjdGl2ZVwiXSlbMF19ZnVuY3Rpb24gaygpe3JldHVyblwib250b3VjaHN0YXJ0XCJpbiBifHwhIW5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzfWZ1bmN0aW9uIGwoKXtyZXR1cm4gYi5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZH12YXIgbSxuLG87bT17c3RhcnQ6MCxzdGFydFg6MCxzdGFydFk6MCxjdXJyZW50OjAsY3VycmVudFg6MCxjdXJyZW50WTowLG9mZnNldFg6MCxvZmZzZXRZOjAsZGlzdGFuY2U6bnVsbCxzdGFydFRpbWU6MCxlbmRUaW1lOjAsdXBkYXRlZFg6MCx0YXJnZXRFbDpudWxsfSxuPXtpc1RvdWNoOiExLGlzU2Nyb2xsaW5nOiExLGlzU3dpcGluZzohMSxkaXJlY3Rpb246ITEsaW5Nb3Rpb246ITF9LG89e19vbkRyYWdTdGFydDpudWxsLF9vbkRyYWdNb3ZlOm51bGwsX29uRHJhZ0VuZDpudWxsLF90cmFuc2l0aW9uRW5kOm51bGwsX3Jlc2l6ZXI6bnVsbCxfcmVzcG9uc2l2ZUNhbGw6bnVsbCxfZ29Ub0xvb3A6bnVsbCxfY2hlY2tWaXNpYmlsZTpudWxsfSxlLkRlZmF1bHRzPXtpdGVtczozLGxvb3A6ITEsY2VudGVyOiExLG1vdXNlRHJhZzohMCx0b3VjaERyYWc6ITAscHVsbERyYWc6ITAsZnJlZURyYWc6ITEsbWFyZ2luOjAsc3RhZ2VQYWRkaW5nOjAsbWVyZ2U6ITEsbWVyZ2VGaXQ6ITAsYXV0b1dpZHRoOiExLHN0YXJ0UG9zaXRpb246MCxydGw6ITEsc21hcnRTcGVlZDoyNTAsZmx1aWRTcGVlZDohMSxkcmFnRW5kU3BlZWQ6ITEscmVzcG9uc2l2ZTp7fSxyZXNwb25zaXZlUmVmcmVzaFJhdGU6MjAwLHJlc3BvbnNpdmVCYXNlRWxlbWVudDpiLHJlc3BvbnNpdmVDbGFzczohMSxmYWxsYmFja0Vhc2luZzpcInN3aW5nXCIsaW5mbzohMSxuZXN0ZWRJdGVtU2VsZWN0b3I6ITEsaXRlbUVsZW1lbnQ6XCJkaXZcIixzdGFnZUVsZW1lbnQ6XCJkaXZcIix0aGVtZUNsYXNzOlwib3dsLXRoZW1lXCIsYmFzZUNsYXNzOlwib3dsLWNhcm91c2VsXCIsaXRlbUNsYXNzOlwib3dsLWl0ZW1cIixjZW50ZXJDbGFzczpcImNlbnRlclwiLGFjdGl2ZUNsYXNzOlwiYWN0aXZlXCJ9LGUuV2lkdGg9e0RlZmF1bHQ6XCJkZWZhdWx0XCIsSW5uZXI6XCJpbm5lclwiLE91dGVyOlwib3V0ZXJcIn0sZS5QbHVnaW5zPXt9LGUuUGlwZT1be2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXthLmN1cnJlbnQ9dGhpcy5faXRlbXMmJnRoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUodGhpcy5fY3VycmVudCldfX0se2ZpbHRlcjpbXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY2xvbmVzLGI9dGhpcy4kc3RhZ2UuY2hpbGRyZW4oXCIuY2xvbmVkXCIpOyhiLmxlbmd0aCE9PWEubGVuZ3RofHwhdGhpcy5zZXR0aW5ncy5sb29wJiZhLmxlbmd0aD4wKSYmKHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLmNsb25lZFwiKS5yZW1vdmUoKSx0aGlzLl9jbG9uZXM9W10pfX0se2ZpbHRlcjpbXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuX2Nsb25lcyxkPXRoaXMuX2l0ZW1zLGU9dGhpcy5zZXR0aW5ncy5sb29wP2MubGVuZ3RoLU1hdGgubWF4KDIqdGhpcy5zZXR0aW5ncy5pdGVtcyw0KTowO2ZvcihhPTAsYj1NYXRoLmFicyhlLzIpO2I+YTthKyspZT4wPyh0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmVxKGQubGVuZ3RoK2MubGVuZ3RoLTEpLnJlbW92ZSgpLGMucG9wKCksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcSgwKS5yZW1vdmUoKSxjLnBvcCgpKTooYy5wdXNoKGMubGVuZ3RoLzIpLHRoaXMuJHN0YWdlLmFwcGVuZChkW2NbYy5sZW5ndGgtMV1dLmNsb25lKCkuYWRkQ2xhc3MoXCJjbG9uZWRcIikpLGMucHVzaChkLmxlbmd0aC0xLShjLmxlbmd0aC0xKS8yKSx0aGlzLiRzdGFnZS5wcmVwZW5kKGRbY1tjLmxlbmd0aC0xXV0uY2xvbmUoKS5hZGRDbGFzcyhcImNsb25lZFwiKSkpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuc2V0dGluZ3MucnRsPzE6LTEsZT0odGhpcy53aWR0aCgpL3RoaXMuc2V0dGluZ3MuaXRlbXMpLnRvRml4ZWQoMyksZj0wO2Zvcih0aGlzLl9jb29yZGluYXRlcz1bXSxiPTAsYz10aGlzLl9jbG9uZXMubGVuZ3RoK3RoaXMuX2l0ZW1zLmxlbmd0aDtjPmI7YisrKWE9dGhpcy5fbWVyZ2Vyc1t0aGlzLnJlbGF0aXZlKGIpXSxhPXRoaXMuc2V0dGluZ3MubWVyZ2VGaXQmJk1hdGgubWluKGEsdGhpcy5zZXR0aW5ncy5pdGVtcyl8fGEsZis9KHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoP3RoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUoYildLndpZHRoKCkrdGhpcy5zZXR0aW5ncy5tYXJnaW46ZSphKSpkLHRoaXMuX2Nvb3JkaW5hdGVzLnB1c2goZil9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGIsYyxkPSh0aGlzLndpZHRoKCkvdGhpcy5zZXR0aW5ncy5pdGVtcykudG9GaXhlZCgzKSxlPXt3aWR0aDpNYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1t0aGlzLl9jb29yZGluYXRlcy5sZW5ndGgtMV0pKzIqdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcsXCJwYWRkaW5nLWxlZnRcIjp0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZ3x8XCJcIixcInBhZGRpbmctcmlnaHRcIjp0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZ3x8XCJcIn07aWYodGhpcy4kc3RhZ2UuY3NzKGUpLGU9e3dpZHRoOnRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoP1wiYXV0b1wiOmQtdGhpcy5zZXR0aW5ncy5tYXJnaW59LGVbdGhpcy5zZXR0aW5ncy5ydGw/XCJtYXJnaW4tbGVmdFwiOlwibWFyZ2luLXJpZ2h0XCJdPXRoaXMuc2V0dGluZ3MubWFyZ2luLCF0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCYmYS5ncmVwKHRoaXMuX21lcmdlcnMsZnVuY3Rpb24oYSl7cmV0dXJuIGE+MX0pLmxlbmd0aD4wKWZvcihiPTAsYz10aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7Yz5iO2IrKyllLndpZHRoPU1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW2JdKS1NYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1tiLTFdfHwwKS10aGlzLnNldHRpbmdzLm1hcmdpbix0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmVxKGIpLmNzcyhlKTtlbHNlIHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuY3NzKGUpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXthLmN1cnJlbnQmJnRoaXMucmVzZXQodGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5pbmRleChhLmN1cnJlbnQpKX19LHtmaWx0ZXI6W1wicG9zaXRpb25cIl0scnVuOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRlKHRoaXMuY29vcmRpbmF0ZXModGhpcy5fY3VycmVudCkpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwicG9zaXRpb25cIixcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlPXRoaXMuc2V0dGluZ3MucnRsPzE6LTEsZj0yKnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nLGc9dGhpcy5jb29yZGluYXRlcyh0aGlzLmN1cnJlbnQoKSkrZixoPWcrdGhpcy53aWR0aCgpKmUsaT1bXTtmb3IoYz0wLGQ9dGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoO2Q+YztjKyspYT10aGlzLl9jb29yZGluYXRlc1tjLTFdfHwwLGI9TWF0aC5hYnModGhpcy5fY29vcmRpbmF0ZXNbY10pK2YqZSwodGhpcy5vcChhLFwiPD1cIixnKSYmdGhpcy5vcChhLFwiPlwiLGgpfHx0aGlzLm9wKGIsXCI8XCIsZykmJnRoaXMub3AoYixcIj5cIixoKSkmJmkucHVzaChjKTt0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5cIit0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKSx0aGlzLiRzdGFnZS5jaGlsZHJlbihcIjplcShcIitpLmpvaW4oXCIpLCA6ZXEoXCIpK1wiKVwiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKSx0aGlzLnNldHRpbmdzLmNlbnRlciYmKHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLlwiK3RoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5jdXJyZW50KCkpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpKX19XSxlLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy50cmlnZ2VyKFwiaW5pdGlhbGl6ZVwiKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuYmFzZUNsYXNzKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnRoZW1lQ2xhc3MpLnRvZ2dsZUNsYXNzKFwib3dsLXJ0bFwiLHRoaXMuc2V0dGluZ3MucnRsKSx0aGlzLmJyb3dzZXJTdXBwb3J0KCksdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgmJnRoaXMuc3RhdGUuaW1hZ2VzTG9hZGVkIT09ITApe3ZhciBiLGMsZTtpZihiPXRoaXMuJGVsZW1lbnQuZmluZChcImltZ1wiKSxjPXRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yP1wiLlwiK3RoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yOmQsZT10aGlzLiRlbGVtZW50LmNoaWxkcmVuKGMpLndpZHRoKCksYi5sZW5ndGgmJjA+PWUpcmV0dXJuIHRoaXMucHJlbG9hZEF1dG9XaWR0aEltYWdlcyhiKSwhMX10aGlzLiRlbGVtZW50LmFkZENsYXNzKFwib3dsLWxvYWRpbmdcIiksdGhpcy4kc3RhZ2U9YShcIjxcIit0aGlzLnNldHRpbmdzLnN0YWdlRWxlbWVudCsnIGNsYXNzPVwib3dsLXN0YWdlXCIvPicpLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtc3RhZ2Utb3V0ZXJcIj4nKSx0aGlzLiRlbGVtZW50LmFwcGVuZCh0aGlzLiRzdGFnZS5wYXJlbnQoKSksdGhpcy5yZXBsYWNlKHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKS5ub3QodGhpcy4kc3RhZ2UucGFyZW50KCkpKSx0aGlzLl93aWR0aD10aGlzLiRlbGVtZW50LndpZHRoKCksdGhpcy5yZWZyZXNoKCksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcIm93bC1sb2FkaW5nXCIpLmFkZENsYXNzKFwib3dsLWxvYWRlZFwiKSx0aGlzLmV2ZW50c0NhbGwoKSx0aGlzLmludGVybmFsRXZlbnRzKCksdGhpcy5hZGRUcmlnZ2VyYWJsZUV2ZW50cygpLHRoaXMudHJpZ2dlcihcImluaXRpYWxpemVkXCIpfSxlLnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbigpe3ZhciBiPXRoaXMudmlld3BvcnQoKSxjPXRoaXMub3B0aW9ucy5yZXNwb25zaXZlLGQ9LTEsZT1udWxsO2M/KGEuZWFjaChjLGZ1bmN0aW9uKGEpe2I+PWEmJmE+ZCYmKGQ9TnVtYmVyKGEpKX0pLGU9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLGNbZF0pLGRlbGV0ZSBlLnJlc3BvbnNpdmUsZS5yZXNwb25zaXZlQ2xhc3MmJnRoaXMuJGVsZW1lbnQuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5yZXBsYWNlKC9cXGIgb3dsLXJlc3BvbnNpdmUtXFxTKy9nLFwiXCIpfSkuYWRkQ2xhc3MoXCJvd2wtcmVzcG9uc2l2ZS1cIitkKSk6ZT1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMpLChudWxsPT09dGhpcy5zZXR0aW5nc3x8dGhpcy5fYnJlYWtwb2ludCE9PWQpJiYodGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3Byb3BlcnR5OntuYW1lOlwic2V0dGluZ3NcIix2YWx1ZTplfX0pLHRoaXMuX2JyZWFrcG9pbnQ9ZCx0aGlzLnNldHRpbmdzPWUsdGhpcy5pbnZhbGlkYXRlKFwic2V0dGluZ3NcIiksdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHtwcm9wZXJ0eTp7bmFtZTpcInNldHRpbmdzXCIsdmFsdWU6dGhpcy5zZXR0aW5nc319KSl9LGUucHJvdG90eXBlLm9wdGlvbnNMb2dpYz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJvd2wtY2VudGVyXCIsdGhpcy5zZXR0aW5ncy5jZW50ZXIpLHRoaXMuc2V0dGluZ3MubG9vcCYmdGhpcy5faXRlbXMubGVuZ3RoPHRoaXMuc2V0dGluZ3MuaXRlbXMmJih0aGlzLnNldHRpbmdzLmxvb3A9ITEpLHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoJiYodGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmc9ITEsdGhpcy5zZXR0aW5ncy5tZXJnZT0hMSl9LGUucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy50cmlnZ2VyKFwicHJlcGFyZVwiLHtjb250ZW50OmJ9KTtyZXR1cm4gYy5kYXRhfHwoYy5kYXRhPWEoXCI8XCIrdGhpcy5zZXR0aW5ncy5pdGVtRWxlbWVudCtcIi8+XCIpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuaXRlbUNsYXNzKS5hcHBlbmQoYikpLHRoaXMudHJpZ2dlcihcInByZXBhcmVkXCIse2NvbnRlbnQ6Yy5kYXRhfSksYy5kYXRhfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxjPXRoaXMuX3BpcGUubGVuZ3RoLGQ9YS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX0sdGhpcy5faW52YWxpZGF0ZWQpLGU9e307Yz5iOykodGhpcy5faW52YWxpZGF0ZWQuYWxsfHxhLmdyZXAodGhpcy5fcGlwZVtiXS5maWx0ZXIsZCkubGVuZ3RoPjApJiZ0aGlzLl9waXBlW2JdLnJ1bihlKSxiKys7dGhpcy5faW52YWxpZGF0ZWQ9e319LGUucHJvdG90eXBlLndpZHRoPWZ1bmN0aW9uKGEpe3N3aXRjaChhPWF8fGUuV2lkdGguRGVmYXVsdCl7Y2FzZSBlLldpZHRoLklubmVyOmNhc2UgZS5XaWR0aC5PdXRlcjpyZXR1cm4gdGhpcy5fd2lkdGg7ZGVmYXVsdDpyZXR1cm4gdGhpcy5fd2lkdGgtMip0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyt0aGlzLnNldHRpbmdzLm1hcmdpbn19LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5faXRlbXMubGVuZ3RoKXJldHVybiExOyhuZXcgRGF0ZSkuZ2V0VGltZSgpO3RoaXMudHJpZ2dlcihcInJlZnJlc2hcIiksdGhpcy5zZXR1cCgpLHRoaXMub3B0aW9uc0xvZ2ljKCksdGhpcy4kc3RhZ2UuYWRkQ2xhc3MoXCJvd2wtcmVmcmVzaFwiKSx0aGlzLnVwZGF0ZSgpLHRoaXMuJHN0YWdlLnJlbW92ZUNsYXNzKFwib3dsLXJlZnJlc2hcIiksdGhpcy5zdGF0ZS5vcmllbnRhdGlvbj1iLm9yaWVudGF0aW9uLHRoaXMud2F0Y2hWaXNpYmlsaXR5KCksdGhpcy50cmlnZ2VyKFwicmVmcmVzaGVkXCIpfSxlLnByb3RvdHlwZS5ldmVudHNDYWxsPWZ1bmN0aW9uKCl7dGhpcy5lLl9vbkRyYWdTdGFydD1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25EcmFnU3RhcnQoYSl9LHRoaXMpLHRoaXMuZS5fb25EcmFnTW92ZT1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25EcmFnTW92ZShhKX0sdGhpcyksdGhpcy5lLl9vbkRyYWdFbmQ9YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLm9uRHJhZ0VuZChhKX0sdGhpcyksdGhpcy5lLl9vblJlc2l6ZT1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25SZXNpemUoYSl9LHRoaXMpLHRoaXMuZS5fdHJhbnNpdGlvbkVuZD1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMudHJhbnNpdGlvbkVuZChhKX0sdGhpcyksdGhpcy5lLl9wcmV2ZW50Q2xpY2s9YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnByZXZlbnRDbGljayhhKX0sdGhpcyl9LGUucHJvdG90eXBlLm9uVGhyb3R0bGVkUmVzaXplPWZ1bmN0aW9uKCl7Yi5jbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lciksdGhpcy5yZXNpemVUaW1lcj1iLnNldFRpbWVvdXQodGhpcy5lLl9vblJlc2l6ZSx0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmVSZWZyZXNoUmF0ZSl9LGUucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aD90aGlzLl93aWR0aD09PXRoaXMuJGVsZW1lbnQud2lkdGgoKT8hMTp0aGlzLnRyaWdnZXIoXCJyZXNpemVcIikuaXNEZWZhdWx0UHJldmVudGVkKCk/ITE6KHRoaXMuX3dpZHRoPXRoaXMuJGVsZW1lbnQud2lkdGgoKSx0aGlzLmludmFsaWRhdGUoXCJ3aWR0aFwiKSx0aGlzLnJlZnJlc2goKSx2b2lkIHRoaXMudHJpZ2dlcihcInJlc2l6ZWRcIikpOiExfSxlLnByb3RvdHlwZS5ldmVudHNSb3V0ZXI9ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlO1wibW91c2Vkb3duXCI9PT1ifHxcInRvdWNoc3RhcnRcIj09PWI/dGhpcy5vbkRyYWdTdGFydChhKTpcIm1vdXNlbW92ZVwiPT09Ynx8XCJ0b3VjaG1vdmVcIj09PWI/dGhpcy5vbkRyYWdNb3ZlKGEpOlwibW91c2V1cFwiPT09Ynx8XCJ0b3VjaGVuZFwiPT09Yj90aGlzLm9uRHJhZ0VuZChhKTpcInRvdWNoY2FuY2VsXCI9PT1iJiZ0aGlzLm9uRHJhZ0VuZChhKX0sZS5wcm90b3R5cGUuaW50ZXJuYWxFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYz0oaygpLGwoKSk7dGhpcy5zZXR0aW5ncy5tb3VzZURyYWc/KHRoaXMuJHN0YWdlLm9uKFwibW91c2Vkb3duXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpLHRoaXMuJHN0YWdlLm9uKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oKXtyZXR1cm4hMX0pLHRoaXMuJHN0YWdlLmdldCgwKS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9KTp0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwib3dsLXRleHQtc2VsZWN0LW9uXCIpLHRoaXMuc2V0dGluZ3MudG91Y2hEcmFnJiYhYyYmdGhpcy4kc3RhZ2Uub24oXCJ0b3VjaHN0YXJ0IHRvdWNoY2FuY2VsXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpLHRoaXMudHJhbnNpdGlvbkVuZFZlbmRvciYmdGhpcy5vbih0aGlzLiRzdGFnZS5nZXQoMCksdGhpcy50cmFuc2l0aW9uRW5kVmVuZG9yLHRoaXMuZS5fdHJhbnNpdGlvbkVuZCwhMSksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJnRoaXMub24oYixcInJlc2l6ZVwiLGEucHJveHkodGhpcy5vblRocm90dGxlZFJlc2l6ZSx0aGlzKSl9LGUucHJvdG90eXBlLm9uRHJhZ1N0YXJ0PWZ1bmN0aW9uKGQpe3ZhciBlLGcsaCxpO2lmKGU9ZC5vcmlnaW5hbEV2ZW50fHxkfHxiLmV2ZW50LDM9PT1lLndoaWNofHx0aGlzLnN0YXRlLmlzVG91Y2gpcmV0dXJuITE7aWYoXCJtb3VzZWRvd25cIj09PWUudHlwZSYmdGhpcy4kc3RhZ2UuYWRkQ2xhc3MoXCJvd2wtZ3JhYlwiKSx0aGlzLnRyaWdnZXIoXCJkcmFnXCIpLHRoaXMuZHJhZy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5zcGVlZCgwKSx0aGlzLnN0YXRlLmlzVG91Y2g9ITAsdGhpcy5zdGF0ZS5pc1Njcm9sbGluZz0hMSx0aGlzLnN0YXRlLmlzU3dpcGluZz0hMSx0aGlzLmRyYWcuZGlzdGFuY2U9MCxnPWYoZSkueCxoPWYoZSkueSx0aGlzLmRyYWcub2Zmc2V0WD10aGlzLiRzdGFnZS5wb3NpdGlvbigpLmxlZnQsdGhpcy5kcmFnLm9mZnNldFk9dGhpcy4kc3RhZ2UucG9zaXRpb24oKS50b3AsdGhpcy5zZXR0aW5ncy5ydGwmJih0aGlzLmRyYWcub2Zmc2V0WD10aGlzLiRzdGFnZS5wb3NpdGlvbigpLmxlZnQrdGhpcy4kc3RhZ2Uud2lkdGgoKS10aGlzLndpZHRoKCkrdGhpcy5zZXR0aW5ncy5tYXJnaW4pLHRoaXMuc3RhdGUuaW5Nb3Rpb24mJnRoaXMuc3VwcG9ydDNkKWk9dGhpcy5nZXRUcmFuc2Zvcm1Qcm9wZXJ0eSgpLHRoaXMuZHJhZy5vZmZzZXRYPWksdGhpcy5hbmltYXRlKGkpLHRoaXMuc3RhdGUuaW5Nb3Rpb249ITA7ZWxzZSBpZih0aGlzLnN0YXRlLmluTW90aW9uJiYhdGhpcy5zdXBwb3J0M2QpcmV0dXJuIHRoaXMuc3RhdGUuaW5Nb3Rpb249ITEsITE7dGhpcy5kcmFnLnN0YXJ0WD1nLXRoaXMuZHJhZy5vZmZzZXRYLHRoaXMuZHJhZy5zdGFydFk9aC10aGlzLmRyYWcub2Zmc2V0WSx0aGlzLmRyYWcuc3RhcnQ9Zy10aGlzLmRyYWcuc3RhcnRYLHRoaXMuZHJhZy50YXJnZXRFbD1lLnRhcmdldHx8ZS5zcmNFbGVtZW50LHRoaXMuZHJhZy51cGRhdGVkWD10aGlzLmRyYWcuc3RhcnQsKFwiSU1HXCI9PT10aGlzLmRyYWcudGFyZ2V0RWwudGFnTmFtZXx8XCJBXCI9PT10aGlzLmRyYWcudGFyZ2V0RWwudGFnTmFtZSkmJih0aGlzLmRyYWcudGFyZ2V0RWwuZHJhZ2dhYmxlPSExKSxhKGMpLm9uKFwibW91c2Vtb3ZlLm93bC5kcmFnRXZlbnRzIG1vdXNldXAub3dsLmRyYWdFdmVudHMgdG91Y2htb3ZlLm93bC5kcmFnRXZlbnRzIHRvdWNoZW5kLm93bC5kcmFnRXZlbnRzXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpfSxlLnByb3RvdHlwZS5vbkRyYWdNb3ZlPWZ1bmN0aW9uKGEpe3ZhciBjLGUsZyxoLGksajt0aGlzLnN0YXRlLmlzVG91Y2gmJih0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nfHwoYz1hLm9yaWdpbmFsRXZlbnR8fGF8fGIuZXZlbnQsZT1mKGMpLngsZz1mKGMpLnksdGhpcy5kcmFnLmN1cnJlbnRYPWUtdGhpcy5kcmFnLnN0YXJ0WCx0aGlzLmRyYWcuY3VycmVudFk9Zy10aGlzLmRyYWcuc3RhcnRZLHRoaXMuZHJhZy5kaXN0YW5jZT10aGlzLmRyYWcuY3VycmVudFgtdGhpcy5kcmFnLm9mZnNldFgsdGhpcy5kcmFnLmRpc3RhbmNlPDA/dGhpcy5zdGF0ZS5kaXJlY3Rpb249dGhpcy5zZXR0aW5ncy5ydGw/XCJyaWdodFwiOlwibGVmdFwiOnRoaXMuZHJhZy5kaXN0YW5jZT4wJiYodGhpcy5zdGF0ZS5kaXJlY3Rpb249dGhpcy5zZXR0aW5ncy5ydGw/XCJsZWZ0XCI6XCJyaWdodFwiKSx0aGlzLnNldHRpbmdzLmxvb3A/dGhpcy5vcCh0aGlzLmRyYWcuY3VycmVudFgsXCI+XCIsdGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSkpJiZcInJpZ2h0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbj90aGlzLmRyYWcuY3VycmVudFgtPSh0aGlzLnNldHRpbmdzLmNlbnRlciYmdGhpcy5jb29yZGluYXRlcygwKSktdGhpcy5jb29yZGluYXRlcyh0aGlzLl9pdGVtcy5sZW5ndGgpOnRoaXMub3AodGhpcy5kcmFnLmN1cnJlbnRYLFwiPFwiLHRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkpKSYmXCJsZWZ0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbiYmKHRoaXMuZHJhZy5jdXJyZW50WCs9KHRoaXMuc2V0dGluZ3MuY2VudGVyJiZ0aGlzLmNvb3JkaW5hdGVzKDApKS10aGlzLmNvb3JkaW5hdGVzKHRoaXMuX2l0ZW1zLmxlbmd0aCkpOihoPXRoaXMuY29vcmRpbmF0ZXModGhpcy5zZXR0aW5ncy5ydGw/dGhpcy5tYXhpbXVtKCk6dGhpcy5taW5pbXVtKCkpLGk9dGhpcy5jb29yZGluYXRlcyh0aGlzLnNldHRpbmdzLnJ0bD90aGlzLm1pbmltdW0oKTp0aGlzLm1heGltdW0oKSksaj10aGlzLnNldHRpbmdzLnB1bGxEcmFnP3RoaXMuZHJhZy5kaXN0YW5jZS81OjAsdGhpcy5kcmFnLmN1cnJlbnRYPU1hdGgubWF4KE1hdGgubWluKHRoaXMuZHJhZy5jdXJyZW50WCxoK2opLGkraikpLCh0aGlzLmRyYWcuZGlzdGFuY2U+OHx8dGhpcy5kcmFnLmRpc3RhbmNlPC04KSYmKGMucHJldmVudERlZmF1bHQhPT1kP2MucHJldmVudERlZmF1bHQoKTpjLnJldHVyblZhbHVlPSExLHRoaXMuc3RhdGUuaXNTd2lwaW5nPSEwKSx0aGlzLmRyYWcudXBkYXRlZFg9dGhpcy5kcmFnLmN1cnJlbnRYLCh0aGlzLmRyYWcuY3VycmVudFk+MTZ8fHRoaXMuZHJhZy5jdXJyZW50WTwtMTYpJiZ0aGlzLnN0YXRlLmlzU3dpcGluZz09PSExJiYodGhpcy5zdGF0ZS5pc1Njcm9sbGluZz0hMCx0aGlzLmRyYWcudXBkYXRlZFg9dGhpcy5kcmFnLnN0YXJ0KSx0aGlzLmFuaW1hdGUodGhpcy5kcmFnLnVwZGF0ZWRYKSkpfSxlLnByb3RvdHlwZS5vbkRyYWdFbmQ9ZnVuY3Rpb24oYil7dmFyIGQsZSxmO2lmKHRoaXMuc3RhdGUuaXNUb3VjaCl7aWYoXCJtb3VzZXVwXCI9PT1iLnR5cGUmJnRoaXMuJHN0YWdlLnJlbW92ZUNsYXNzKFwib3dsLWdyYWJcIiksdGhpcy50cmlnZ2VyKFwiZHJhZ2dlZFwiKSx0aGlzLmRyYWcudGFyZ2V0RWwucmVtb3ZlQXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIpLHRoaXMuc3RhdGUuaXNUb3VjaD0hMSx0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nPSExLHRoaXMuc3RhdGUuaXNTd2lwaW5nPSExLDA9PT10aGlzLmRyYWcuZGlzdGFuY2UmJnRoaXMuc3RhdGUuaW5Nb3Rpb24hPT0hMClyZXR1cm4gdGhpcy5zdGF0ZS5pbk1vdGlvbj0hMSwhMTt0aGlzLmRyYWcuZW5kVGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxkPXRoaXMuZHJhZy5lbmRUaW1lLXRoaXMuZHJhZy5zdGFydFRpbWUsZT1NYXRoLmFicyh0aGlzLmRyYWcuZGlzdGFuY2UpLChlPjN8fGQ+MzAwKSYmdGhpcy5yZW1vdmVDbGljayh0aGlzLmRyYWcudGFyZ2V0RWwpLGY9dGhpcy5jbG9zZXN0KHRoaXMuZHJhZy51cGRhdGVkWCksdGhpcy5zcGVlZCh0aGlzLnNldHRpbmdzLmRyYWdFbmRTcGVlZHx8dGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKSx0aGlzLmN1cnJlbnQoZiksdGhpcy5pbnZhbGlkYXRlKFwicG9zaXRpb25cIiksdGhpcy51cGRhdGUoKSx0aGlzLnNldHRpbmdzLnB1bGxEcmFnfHx0aGlzLmRyYWcudXBkYXRlZFghPT10aGlzLmNvb3JkaW5hdGVzKGYpfHx0aGlzLnRyYW5zaXRpb25FbmQoKSx0aGlzLmRyYWcuZGlzdGFuY2U9MCxhKGMpLm9mZihcIi5vd2wuZHJhZ0V2ZW50c1wiKX19LGUucHJvdG90eXBlLnJlbW92ZUNsaWNrPWZ1bmN0aW9uKGMpe3RoaXMuZHJhZy50YXJnZXRFbD1jLGEoYykub24oXCJjbGljay5wcmV2ZW50Q2xpY2tcIix0aGlzLmUuX3ByZXZlbnRDbGljayksYi5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShjKS5vZmYoXCJjbGljay5wcmV2ZW50Q2xpY2tcIil9LDMwMCl9LGUucHJvdG90eXBlLnByZXZlbnRDbGljaz1mdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGIuc3RvcFByb3BhZ2F0aW9uJiZiLnN0b3BQcm9wYWdhdGlvbigpLGEoYi50YXJnZXQpLm9mZihcImNsaWNrLnByZXZlbnRDbGlja1wiKX0sZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtUHJvcGVydHk9ZnVuY3Rpb24oKXt2YXIgYSxjO3JldHVybiBhPWIuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiRzdGFnZS5nZXQoMCksbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSh0aGlzLnZlbmRvck5hbWUrXCJ0cmFuc2Zvcm1cIiksYT1hLnJlcGxhY2UoL21hdHJpeCgzZCk/XFwofFxcKS9nLFwiXCIpLnNwbGl0KFwiLFwiKSxjPTE2PT09YS5sZW5ndGgsYyE9PSEwP2FbNF06YVsxMl19LGUucHJvdG90eXBlLmNsb3Nlc3Q9ZnVuY3Rpb24oYil7dmFyIGM9LTEsZD0zMCxlPXRoaXMud2lkdGgoKSxmPXRoaXMuY29vcmRpbmF0ZXMoKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5mcmVlRHJhZ3x8YS5lYWNoKGYsYS5wcm94eShmdW5jdGlvbihhLGcpe3JldHVybiBiPmctZCYmZytkPmI/Yz1hOnRoaXMub3AoYixcIjxcIixnKSYmdGhpcy5vcChiLFwiPlwiLGZbYSsxXXx8Zy1lKSYmKGM9XCJsZWZ0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbj9hKzE6YSksLTE9PT1jfSx0aGlzKSksdGhpcy5zZXR0aW5ncy5sb29wfHwodGhpcy5vcChiLFwiPlwiLGZbdGhpcy5taW5pbXVtKCldKT9jPWI9dGhpcy5taW5pbXVtKCk6dGhpcy5vcChiLFwiPFwiLGZbdGhpcy5tYXhpbXVtKCldKSYmKGM9Yj10aGlzLm1heGltdW0oKSkpLGN9LGUucHJvdG90eXBlLmFuaW1hdGU9ZnVuY3Rpb24oYil7dGhpcy50cmlnZ2VyKFwidHJhbnNsYXRlXCIpLHRoaXMuc3RhdGUuaW5Nb3Rpb249dGhpcy5zcGVlZCgpPjAsdGhpcy5zdXBwb3J0M2Q/dGhpcy4kc3RhZ2UuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIitiK1wicHgsMHB4LCAwcHgpXCIsdHJhbnNpdGlvbjp0aGlzLnNwZWVkKCkvMWUzK1wic1wifSk6dGhpcy5zdGF0ZS5pc1RvdWNoP3RoaXMuJHN0YWdlLmNzcyh7bGVmdDpiK1wicHhcIn0pOnRoaXMuJHN0YWdlLmFuaW1hdGUoe2xlZnQ6Yn0sdGhpcy5zcGVlZCgpLzFlMyx0aGlzLnNldHRpbmdzLmZhbGxiYWNrRWFzaW5nLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnN0YXRlLmluTW90aW9uJiZ0aGlzLnRyYW5zaXRpb25FbmQoKX0sdGhpcykpfSxlLnByb3RvdHlwZS5jdXJyZW50PWZ1bmN0aW9uKGEpe2lmKGE9PT1kKXJldHVybiB0aGlzLl9jdXJyZW50O2lmKDA9PT10aGlzLl9pdGVtcy5sZW5ndGgpcmV0dXJuIGQ7aWYoYT10aGlzLm5vcm1hbGl6ZShhKSx0aGlzLl9jdXJyZW50IT09YSl7dmFyIGI9dGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3Byb3BlcnR5OntuYW1lOlwicG9zaXRpb25cIix2YWx1ZTphfX0pO2IuZGF0YSE9PWQmJihhPXRoaXMubm9ybWFsaXplKGIuZGF0YSkpLHRoaXMuX2N1cnJlbnQ9YSx0aGlzLmludmFsaWRhdGUoXCJwb3NpdGlvblwiKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse3Byb3BlcnR5OntuYW1lOlwicG9zaXRpb25cIix2YWx1ZTp0aGlzLl9jdXJyZW50fX0pfXJldHVybiB0aGlzLl9jdXJyZW50fSxlLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKGEpe3RoaXMuX2ludmFsaWRhdGVkW2FdPSEwfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEpLGEhPT1kJiYodGhpcy5fc3BlZWQ9MCx0aGlzLl9jdXJyZW50PWEsdGhpcy5zdXBwcmVzcyhbXCJ0cmFuc2xhdGVcIixcInRyYW5zbGF0ZWRcIl0pLHRoaXMuYW5pbWF0ZSh0aGlzLmNvb3JkaW5hdGVzKGEpKSx0aGlzLnJlbGVhc2UoW1widHJhbnNsYXRlXCIsXCJ0cmFuc2xhdGVkXCJdKSl9LGUucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbihiLGMpe3ZhciBlPWM/dGhpcy5faXRlbXMubGVuZ3RoOnRoaXMuX2l0ZW1zLmxlbmd0aCt0aGlzLl9jbG9uZXMubGVuZ3RoO3JldHVybiFhLmlzTnVtZXJpYyhiKXx8MT5lP2Q6Yj10aGlzLl9jbG9uZXMubGVuZ3RoPyhiJWUrZSklZTpNYXRoLm1heCh0aGlzLm1pbmltdW0oYyksTWF0aC5taW4odGhpcy5tYXhpbXVtKGMpLGIpKX0sZS5wcm90b3R5cGUucmVsYXRpdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5ub3JtYWxpemUoYSksYS09dGhpcy5fY2xvbmVzLmxlbmd0aC8yLHRoaXMubm9ybWFsaXplKGEsITApfSxlLnByb3RvdHlwZS5tYXhpbXVtPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPTAsZj10aGlzLnNldHRpbmdzO2lmKGEpcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aC0xO2lmKCFmLmxvb3AmJmYuY2VudGVyKWI9dGhpcy5faXRlbXMubGVuZ3RoLTE7ZWxzZSBpZihmLmxvb3B8fGYuY2VudGVyKWlmKGYubG9vcHx8Zi5jZW50ZXIpYj10aGlzLl9pdGVtcy5sZW5ndGgrZi5pdGVtcztlbHNle2lmKCFmLmF1dG9XaWR0aCYmIWYubWVyZ2UpdGhyb3dcIkNhbiBub3QgZGV0ZWN0IG1heGltdW0gYWJzb2x1dGUgcG9zaXRpb24uXCI7Zm9yKHJldmVydD1mLnJ0bD8xOi0xLGM9dGhpcy4kc3RhZ2Uud2lkdGgoKS10aGlzLiRlbGVtZW50LndpZHRoKCk7KGQ9dGhpcy5jb29yZGluYXRlcyhlKSkmJiEoZCpyZXZlcnQ+PWMpOyliPSsrZX1lbHNlIGI9dGhpcy5faXRlbXMubGVuZ3RoLWYuaXRlbXM7cmV0dXJuIGJ9LGUucHJvdG90eXBlLm1pbmltdW09ZnVuY3Rpb24oYSl7cmV0dXJuIGE/MDp0aGlzLl9jbG9uZXMubGVuZ3RoLzJ9LGUucHJvdG90eXBlLml0ZW1zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZD90aGlzLl9pdGVtcy5zbGljZSgpOihhPXRoaXMubm9ybWFsaXplKGEsITApLHRoaXMuX2l0ZW1zW2FdKX0sZS5wcm90b3R5cGUubWVyZ2Vycz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PWQ/dGhpcy5fbWVyZ2Vycy5zbGljZSgpOihhPXRoaXMubm9ybWFsaXplKGEsITApLHRoaXMuX21lcmdlcnNbYV0pfSxlLnByb3RvdHlwZS5jbG9uZXM9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fY2xvbmVzLmxlbmd0aC8yLGU9Yyt0aGlzLl9pdGVtcy5sZW5ndGgsZj1mdW5jdGlvbihhKXtyZXR1cm4gYSUyPT09MD9lK2EvMjpjLShhKzEpLzJ9O3JldHVybiBiPT09ZD9hLm1hcCh0aGlzLl9jbG9uZXMsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihiKX0pOmEubWFwKHRoaXMuX2Nsb25lcyxmdW5jdGlvbihhLGMpe3JldHVybiBhPT09Yj9mKGMpOm51bGx9KX0sZS5wcm90b3R5cGUuc3BlZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1kJiYodGhpcy5fc3BlZWQ9YSksdGhpcy5fc3BlZWR9LGUucHJvdG90eXBlLmNvb3JkaW5hdGVzPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGw7cmV0dXJuIGI9PT1kP2EubWFwKHRoaXMuX2Nvb3JkaW5hdGVzLGEucHJveHkoZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlcyhiKX0sdGhpcykpOih0aGlzLnNldHRpbmdzLmNlbnRlcj8oYz10aGlzLl9jb29yZGluYXRlc1tiXSxjKz0odGhpcy53aWR0aCgpLWMrKHRoaXMuX2Nvb3JkaW5hdGVzW2ItMV18fDApKS8yKih0aGlzLnNldHRpbmdzLnJ0bD8tMToxKSk6Yz10aGlzLl9jb29yZGluYXRlc1tiLTFdfHwwLGMpfSxlLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KE1hdGguYWJzKGItYSksMSksNikqTWF0aC5hYnMoY3x8dGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKX0sZS5wcm90b3R5cGUudG89ZnVuY3Rpb24oYyxkKXtpZih0aGlzLnNldHRpbmdzLmxvb3Ape3ZhciBlPWMtdGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSksZj10aGlzLmN1cnJlbnQoKSxnPXRoaXMuY3VycmVudCgpLGg9dGhpcy5jdXJyZW50KCkrZSxpPTA+Zy1oPyEwOiExLGo9dGhpcy5fY2xvbmVzLmxlbmd0aCt0aGlzLl9pdGVtcy5sZW5ndGg7aDx0aGlzLnNldHRpbmdzLml0ZW1zJiZpPT09ITE/KGY9Zyt0aGlzLl9pdGVtcy5sZW5ndGgsdGhpcy5yZXNldChmKSk6aD49ai10aGlzLnNldHRpbmdzLml0ZW1zJiZpPT09ITAmJihmPWctdGhpcy5faXRlbXMubGVuZ3RoLHRoaXMucmVzZXQoZikpLGIuY2xlYXJUaW1lb3V0KHRoaXMuZS5fZ29Ub0xvb3ApLHRoaXMuZS5fZ29Ub0xvb3A9Yi5zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24odGhpcy5jdXJyZW50KCksZitlLGQpKSx0aGlzLmN1cnJlbnQoZitlKSx0aGlzLnVwZGF0ZSgpfSx0aGlzKSwzMCl9ZWxzZSB0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24odGhpcy5jdXJyZW50KCksYyxkKSksdGhpcy5jdXJyZW50KGMpLHRoaXMudXBkYXRlKCl9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oYSl7YT1hfHwhMSx0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpKzEsYSl9LGUucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oYSl7YT1hfHwhMSx0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpLTEsYSl9LGUucHJvdG90eXBlLnRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1kJiYoYS5zdG9wUHJvcGFnYXRpb24oKSwoYS50YXJnZXR8fGEuc3JjRWxlbWVudHx8YS5vcmlnaW5hbFRhcmdldCkhPT10aGlzLiRzdGFnZS5nZXQoMCkpPyExOih0aGlzLnN0YXRlLmluTW90aW9uPSExLHZvaWQgdGhpcy50cmlnZ2VyKFwidHJhbnNsYXRlZFwiKSl9LGUucHJvdG90eXBlLnZpZXdwb3J0PWZ1bmN0aW9uKCl7dmFyIGQ7aWYodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlRWxlbWVudCE9PWIpZD1hKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQmFzZUVsZW1lbnQpLndpZHRoKCk7ZWxzZSBpZihiLmlubmVyV2lkdGgpZD1iLmlubmVyV2lkdGg7ZWxzZXtpZighYy5kb2N1bWVudEVsZW1lbnR8fCFjLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCl0aHJvd1wiQ2FuIG5vdCBkZXRlY3Qgdmlld3BvcnQgd2lkdGguXCI7ZD1jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aH1yZXR1cm4gZH0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihiKXt0aGlzLiRzdGFnZS5lbXB0eSgpLHRoaXMuX2l0ZW1zPVtdLGImJihiPWIgaW5zdGFuY2VvZiBqUXVlcnk/YjphKGIpKSx0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvciYmKGI9Yi5maW5kKFwiLlwiK3RoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yKSksYi5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubm9kZVR5cGV9KS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYSxiKXtiPXRoaXMucHJlcGFyZShiKSx0aGlzLiRzdGFnZS5hcHBlbmQoYiksdGhpcy5faXRlbXMucHVzaChiKSx0aGlzLl9tZXJnZXJzLnB1c2goMSpiLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSl9LHRoaXMpKSx0aGlzLnJlc2V0KGEuaXNOdW1lcmljKHRoaXMuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbik/dGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uOjApLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiKXtiPWI9PT1kP3RoaXMuX2l0ZW1zLmxlbmd0aDp0aGlzLm5vcm1hbGl6ZShiLCEwKSx0aGlzLnRyaWdnZXIoXCJhZGRcIix7Y29udGVudDphLHBvc2l0aW9uOmJ9KSwwPT09dGhpcy5faXRlbXMubGVuZ3RofHxiPT09dGhpcy5faXRlbXMubGVuZ3RoPyh0aGlzLiRzdGFnZS5hcHBlbmQoYSksdGhpcy5faXRlbXMucHVzaChhKSx0aGlzLl9tZXJnZXJzLnB1c2goMSphLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpOih0aGlzLl9pdGVtc1tiXS5iZWZvcmUoYSksdGhpcy5faXRlbXMuc3BsaWNlKGIsMCxhKSx0aGlzLl9tZXJnZXJzLnNwbGljZShiLDAsMSphLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpLHRoaXMudHJpZ2dlcihcImFkZGVkXCIse2NvbnRlbnQ6YSxwb3NpdGlvbjpifSl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEsITApLGEhPT1kJiYodGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse2NvbnRlbnQ6dGhpcy5faXRlbXNbYV0scG9zaXRpb246YX0pLHRoaXMuX2l0ZW1zW2FdLnJlbW92ZSgpLHRoaXMuX2l0ZW1zLnNwbGljZShhLDEpLHRoaXMuX21lcmdlcnMuc3BsaWNlKGEsMSksdGhpcy5pbnZhbGlkYXRlKFwiaXRlbXNcIiksdGhpcy50cmlnZ2VyKFwicmVtb3ZlZFwiLHtjb250ZW50Om51bGwscG9zaXRpb246YX0pKX0sZS5wcm90b3R5cGUuYWRkVHJpZ2dlcmFibGVFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYj1hLnByb3h5KGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHJveHkoZnVuY3Rpb24oYSl7YS5yZWxhdGVkVGFyZ2V0IT09dGhpcyYmKHRoaXMuc3VwcHJlc3MoW2NdKSxiLmFwcGx5KHRoaXMsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpLHRoaXMucmVsZWFzZShbY10pKX0sdGhpcyl9LHRoaXMpO2EuZWFjaCh7bmV4dDp0aGlzLm5leHQscHJldjp0aGlzLnByZXYsdG86dGhpcy50byxkZXN0cm95OnRoaXMuZGVzdHJveSxyZWZyZXNoOnRoaXMucmVmcmVzaCxyZXBsYWNlOnRoaXMucmVwbGFjZSxhZGQ6dGhpcy5hZGQscmVtb3ZlOnRoaXMucmVtb3ZlfSxhLnByb3h5KGZ1bmN0aW9uKGEsYyl7dGhpcy4kZWxlbWVudC5vbihhK1wiLm93bC5jYXJvdXNlbFwiLGIoYyxhK1wiLm93bC5jYXJvdXNlbFwiKSl9LHRoaXMpKX0sZS5wcm90b3R5cGUud2F0Y2hWaXNpYmlsaXR5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aD4wJiZhLm9mZnNldEhlaWdodD4wfWZ1bmN0aW9uIGQoKXtjKHRoaXMuJGVsZW1lbnQuZ2V0KDApKSYmKHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJvd2wtaGlkZGVuXCIpLHRoaXMucmVmcmVzaCgpLGIuY2xlYXJJbnRlcnZhbCh0aGlzLmUuX2NoZWNrVmlzaWJpbGUpKX1jKHRoaXMuJGVsZW1lbnQuZ2V0KDApKXx8KHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJvd2wtaGlkZGVuXCIpLGIuY2xlYXJJbnRlcnZhbCh0aGlzLmUuX2NoZWNrVmlzaWJpbGUpLHRoaXMuZS5fY2hlY2tWaXNpYmlsZT1iLnNldEludGVydmFsKGEucHJveHkoZCx0aGlzKSw1MDApKX0sZS5wcm90b3R5cGUucHJlbG9hZEF1dG9XaWR0aEltYWdlcz1mdW5jdGlvbihiKXt2YXIgYyxkLGUsZjtjPTAsZD10aGlzLGIuZWFjaChmdW5jdGlvbihnLGgpe2U9YShoKSxmPW5ldyBJbWFnZSxmLm9ubG9hZD1mdW5jdGlvbigpe2MrKyxlLmF0dHIoXCJzcmNcIixmLnNyYyksZS5jc3MoXCJvcGFjaXR5XCIsMSksYz49Yi5sZW5ndGgmJihkLnN0YXRlLmltYWdlc0xvYWRlZD0hMCxkLmluaXRpYWxpemUoKSl9LGYuc3JjPWUuYXR0cihcInNyY1wiKXx8ZS5hdHRyKFwiZGF0YS1zcmNcIil8fGUuYXR0cihcImRhdGEtc3JjLXJldGluYVwiKX0pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5oYXNDbGFzcyh0aGlzLnNldHRpbmdzLnRoZW1lQ2xhc3MpJiZ0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MudGhlbWVDbGFzcyksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJmEoYikub2ZmKFwicmVzaXplLm93bC5jYXJvdXNlbFwiKSx0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3ImJnRoaXMub2ZmKHRoaXMuJHN0YWdlLmdldCgwKSx0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3IsdGhpcy5lLl90cmFuc2l0aW9uRW5kKTtmb3IodmFyIGQgaW4gdGhpcy5fcGx1Z2lucyl0aGlzLl9wbHVnaW5zW2RdLmRlc3Ryb3koKTsodGhpcy5zZXR0aW5ncy5tb3VzZURyYWd8fHRoaXMuc2V0dGluZ3MudG91Y2hEcmFnKSYmKHRoaXMuJHN0YWdlLm9mZihcIm1vdXNlZG93biB0b3VjaHN0YXJ0IHRvdWNoY2FuY2VsXCIpLGEoYykub2ZmKFwiLm93bC5kcmFnRXZlbnRzXCIpLHRoaXMuJHN0YWdlLmdldCgwKS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7fSx0aGlzLiRzdGFnZS5vZmYoXCJkcmFnc3RhcnRcIixmdW5jdGlvbigpe3JldHVybiExfSkpLHRoaXMuJGVsZW1lbnQub2ZmKFwiLm93bFwiKSx0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5jbG9uZWRcIikucmVtb3ZlKCksdGhpcy5lPW51bGwsdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKFwib3dsQ2Fyb3VzZWxcIiksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jb250ZW50cygpLnVud3JhcCgpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkudW53cmFwKCksdGhpcy4kc3RhZ2UudW53cmFwKCl9LGUucHJvdG90eXBlLm9wPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnNldHRpbmdzLnJ0bDtzd2l0Y2goYil7Y2FzZVwiPFwiOnJldHVybiBkP2E+YzpjPmE7Y2FzZVwiPlwiOnJldHVybiBkP2M+YTphPmM7Y2FzZVwiPj1cIjpyZXR1cm4gZD9jPj1hOmE+PWM7Y2FzZVwiPD1cIjpyZXR1cm4gZD9hPj1jOmM+PWF9fSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihhLGIsYyxkKXthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitiLGMpfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oYSxiLGMsZCl7YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsZCk6YS5kZXRhY2hFdmVudCYmYS5kZXRhY2hFdmVudChcIm9uXCIrYixjKX0sZS5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbihiLGMsZCl7dmFyIGU9e2l0ZW06e2NvdW50OnRoaXMuX2l0ZW1zLmxlbmd0aCxpbmRleDp0aGlzLmN1cnJlbnQoKX19LGY9YS5jYW1lbENhc2UoYS5ncmVwKFtcIm9uXCIsYixkXSxmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmpvaW4oXCItXCIpLnRvTG93ZXJDYXNlKCkpLGc9YS5FdmVudChbYixcIm93bFwiLGR8fFwiY2Fyb3VzZWxcIl0uam9pbihcIi5cIikudG9Mb3dlckNhc2UoKSxhLmV4dGVuZCh7cmVsYXRlZFRhcmdldDp0aGlzfSxlLGMpKTtyZXR1cm4gdGhpcy5fc3VwcmVzc1tiXXx8KGEuZWFjaCh0aGlzLl9wbHVnaW5zLGZ1bmN0aW9uKGEsYil7Yi5vblRyaWdnZXImJmIub25UcmlnZ2VyKGcpfSksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGcpLHRoaXMuc2V0dGluZ3MmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuc2V0dGluZ3NbZl0mJnRoaXMuc2V0dGluZ3NbZl0uYXBwbHkodGhpcyxnKSksZ30sZS5wcm90b3R5cGUuc3VwcHJlc3M9ZnVuY3Rpb24oYil7YS5lYWNoKGIsYS5wcm94eShmdW5jdGlvbihhLGIpe3RoaXMuX3N1cHJlc3NbYl09ITB9LHRoaXMpKX0sZS5wcm90b3R5cGUucmVsZWFzZT1mdW5jdGlvbihiKXthLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7ZGVsZXRlIHRoaXMuX3N1cHJlc3NbYl19LHRoaXMpKX0sZS5wcm90b3R5cGUuYnJvd3NlclN1cHBvcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLnN1cHBvcnQzZD1qKCksdGhpcy5zdXBwb3J0M2Qpe3RoaXMudHJhbnNmb3JtVmVuZG9yPWkoKTt2YXIgYT1bXCJ0cmFuc2l0aW9uZW5kXCIsXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCIsXCJvVHJhbnNpdGlvbkVuZFwiXTt0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3I9YVtoKCldLHRoaXMudmVuZG9yTmFtZT10aGlzLnRyYW5zZm9ybVZlbmRvci5yZXBsYWNlKC9UcmFuc2Zvcm0vaSxcIlwiKSx0aGlzLnZlbmRvck5hbWU9XCJcIiE9PXRoaXMudmVuZG9yTmFtZT9cIi1cIit0aGlzLnZlbmRvck5hbWUudG9Mb3dlckNhc2UoKStcIi1cIjpcIlwifXRoaXMuc3RhdGUub3JpZW50YXRpb249Yi5vcmllbnRhdGlvbn0sYS5mbi5vd2xDYXJvdXNlbD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5kYXRhKFwib3dsQ2Fyb3VzZWxcIil8fGEodGhpcykuZGF0YShcIm93bENhcm91c2VsXCIsbmV3IGUodGhpcyxiKSl9KX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvcj1lfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuX2NvcmU9Yix0aGlzLl9sb2FkZWQ9W10sdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsIGNoYW5nZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe2lmKGIubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmxhenlMb2FkJiYoYi5wcm9wZXJ0eSYmXCJwb3NpdGlvblwiPT1iLnByb3BlcnR5Lm5hbWV8fFwiaW5pdGlhbGl6ZWRcIj09Yi50eXBlKSlmb3IodmFyIGM9dGhpcy5fY29yZS5zZXR0aW5ncyxkPWMuY2VudGVyJiZNYXRoLmNlaWwoYy5pdGVtcy8yKXx8Yy5pdGVtcyxlPWMuY2VudGVyJiYtMSpkfHwwLGY9KGIucHJvcGVydHkmJmIucHJvcGVydHkudmFsdWV8fHRoaXMuX2NvcmUuY3VycmVudCgpKStlLGc9dGhpcy5fY29yZS5jbG9uZXMoKS5sZW5ndGgsaD1hLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5sb2FkKGIpfSx0aGlzKTtlKys8ZDspdGhpcy5sb2FkKGcvMit0aGlzLl9jb3JlLnJlbGF0aXZlKGYpKSxnJiZhLmVhY2godGhpcy5fY29yZS5jbG9uZXModGhpcy5fY29yZS5yZWxhdGl2ZShmKyspKSxoKX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2MuRGVmYXVsdHM9e2xhenlMb2FkOiExfSxjLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEoYyksZT1kJiZkLmZpbmQoXCIub3dsLWxhenlcIik7IWV8fGEuaW5BcnJheShkLmdldCgwKSx0aGlzLl9sb2FkZWQpPi0xfHwoZS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoZCksZz1iLmRldmljZVBpeGVsUmF0aW8+MSYmZi5hdHRyKFwiZGF0YS1zcmMtcmV0aW5hXCIpfHxmLmF0dHIoXCJkYXRhLXNyY1wiKTt0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkXCIse2VsZW1lbnQ6Zix1cmw6Z30sXCJsYXp5XCIpLGYuaXMoXCJpbWdcIik/Zi5vbmUoXCJsb2FkLm93bC5sYXp5XCIsYS5wcm94eShmdW5jdGlvbigpe2YuY3NzKFwib3BhY2l0eVwiLDEpLHRoaXMuX2NvcmUudHJpZ2dlcihcImxvYWRlZFwiLHtlbGVtZW50OmYsdXJsOmd9LFwibGF6eVwiKX0sdGhpcykpLmF0dHIoXCJzcmNcIixnKTooZT1uZXcgSW1hZ2UsZS5vbmxvYWQ9YS5wcm94eShmdW5jdGlvbigpe2YuY3NzKHtcImJhY2tncm91bmQtaW1hZ2VcIjpcInVybChcIitnK1wiKVwiLG9wYWNpdHk6XCIxXCJ9KSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkZWRcIix7ZWxlbWVudDpmLHVybDpnfSxcImxhenlcIil9LHRoaXMpLGUuc3JjPWcpfSx0aGlzKSksdGhpcy5fbG9hZGVkLnB1c2goZC5nZXQoMCkpKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuaGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuTGF6eT1jfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihjKXt0aGlzLl9jb3JlPWMsdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCYmdGhpcy51cGRhdGUoKX0sdGhpcyksXCJjaGFuZ2VkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0JiZcInBvc2l0aW9uXCI9PWEucHJvcGVydHkubmFtZSYmdGhpcy51cGRhdGUoKX0sdGhpcyksXCJsb2FkZWQub3dsLmxhenlcIjphLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCYmYS5lbGVtZW50LmNsb3Nlc3QoXCIuXCIrdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpPT09dGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLl9jb3JlLmN1cnJlbnQoKSkmJnRoaXMudXBkYXRlKCl9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sYi5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpfTtiLkRlZmF1bHRzPXthdXRvSGVpZ2h0OiExLGF1dG9IZWlnaHRDbGFzczpcIm93bC1oZWlnaHRcIn0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS4kc3RhZ2UucGFyZW50KCkuaGVpZ2h0KHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5fY29yZS5jdXJyZW50KCkpLmhlaWdodCgpKS5hZGRDbGFzcyh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHRDbGFzcyl9LGIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQXV0b0hlaWdodD1ifSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX3ZpZGVvcz17fSx0aGlzLl9wbGF5aW5nPW51bGwsdGhpcy5fZnVsbHNjcmVlbj0hMSx0aGlzLl9oYW5kbGVycz17XCJyZXNpemUub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvJiYhdGhpcy5pc0luRnVsbFNjcmVlbigpJiZhLnByZXZlbnREZWZhdWx0KCl9LHRoaXMpLFwicmVmcmVzaC5vd2wuY2Fyb3VzZWwgY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5fcGxheWluZyYmdGhpcy5zdG9wKCl9LHRoaXMpLFwicHJlcGFyZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihiKXt2YXIgYz1hKGIuY29udGVudCkuZmluZChcIi5vd2wtdmlkZW9cIik7Yy5sZW5ndGgmJihjLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksdGhpcy5mZXRjaChjLGEoYi5jb250ZW50KSkpfSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKFwiY2xpY2sub3dsLnZpZGVvXCIsXCIub3dsLXZpZGVvLXBsYXktaWNvblwiLGEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5wbGF5KGEpfSx0aGlzKSl9O2QuRGVmYXVsdHM9e3ZpZGVvOiExLHZpZGVvSGVpZ2h0OiExLHZpZGVvV2lkdGg6ITF9LGQucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5hdHRyKFwiZGF0YS12aW1lby1pZFwiKT9cInZpbWVvXCI6XCJ5b3V0dWJlXCIsZD1hLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpfHxhLmF0dHIoXCJkYXRhLXlvdXR1YmUtaWRcIiksZT1hLmF0dHIoXCJkYXRhLXdpZHRoXCIpfHx0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvV2lkdGgsZj1hLmF0dHIoXCJkYXRhLWhlaWdodFwiKXx8dGhpcy5fY29yZS5zZXR0aW5ncy52aWRlb0hlaWdodCxnPWEuYXR0cihcImhyZWZcIik7aWYoIWcpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB2aWRlbyBVUkwuXCIpO2lmKGQ9Zy5tYXRjaCgvKGh0dHA6fGh0dHBzOnwpXFwvXFwvKHBsYXllci58d3d3Lik/KHZpbWVvXFwuY29tfHlvdXR1KGJlXFwuY29tfFxcLmJlfGJlXFwuZ29vZ2xlYXBpc1xcLmNvbSkpXFwvKHZpZGVvXFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18dlxcLyk/KFtBLVphLXowLTkuXyUtXSopKFxcJlxcUyspPy8pLGRbM10uaW5kZXhPZihcInlvdXR1XCIpPi0xKWM9XCJ5b3V0dWJlXCI7ZWxzZXtpZighKGRbM10uaW5kZXhPZihcInZpbWVvXCIpPi0xKSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyBVUkwgbm90IHN1cHBvcnRlZC5cIik7Yz1cInZpbWVvXCJ9ZD1kWzZdLHRoaXMuX3ZpZGVvc1tnXT17dHlwZTpjLGlkOmQsd2lkdGg6ZSxoZWlnaHQ6Zn0sYi5hdHRyKFwiZGF0YS12aWRlb1wiLGcpLHRoaXMudGh1bWJuYWlsKGEsdGhpcy5fdmlkZW9zW2ddKX0sZC5wcm90b3R5cGUudGh1bWJuYWlsPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmLGc9Yy53aWR0aCYmYy5oZWlnaHQ/J3N0eWxlPVwid2lkdGg6JytjLndpZHRoK1wicHg7aGVpZ2h0OlwiK2MuaGVpZ2h0KydweDtcIic6XCJcIixoPWIuZmluZChcImltZ1wiKSxpPVwic3JjXCIsaj1cIlwiLGs9dGhpcy5fY29yZS5zZXR0aW5ncyxsPWZ1bmN0aW9uKGEpe2U9JzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tcGxheS1pY29uXCI+PC9kaXY+JyxkPWsubGF6eUxvYWQ/JzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tdG4gJytqKydcIiAnK2krJz1cIicrYSsnXCI+PC9kaXY+JzonPGRpdiBjbGFzcz1cIm93bC12aWRlby10blwiIHN0eWxlPVwib3BhY2l0eToxO2JhY2tncm91bmQtaW1hZ2U6dXJsKCcrYSsnKVwiPjwvZGl2PicsYi5hZnRlcihkKSxiLmFmdGVyKGUpfTtyZXR1cm4gYi53cmFwKCc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXdyYXBwZXJcIicrZytcIj48L2Rpdj5cIiksdGhpcy5fY29yZS5zZXR0aW5ncy5sYXp5TG9hZCYmKGk9XCJkYXRhLXNyY1wiLGo9XCJvd2wtbGF6eVwiKSxoLmxlbmd0aD8obChoLmF0dHIoaSkpLGgucmVtb3ZlKCksITEpOnZvaWQoXCJ5b3V0dWJlXCI9PT1jLnR5cGU/KGY9XCJodHRwOi8vaW1nLnlvdXR1YmUuY29tL3ZpL1wiK2MuaWQrXCIvaHFkZWZhdWx0LmpwZ1wiLGwoZikpOlwidmltZW9cIj09PWMudHlwZSYmYS5hamF4KHt0eXBlOlwiR0VUXCIsdXJsOlwiaHR0cDovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vXCIrYy5pZCtcIi5qc29uXCIsanNvbnA6XCJjYWxsYmFja1wiLGRhdGFUeXBlOlwianNvbnBcIixzdWNjZXNzOmZ1bmN0aW9uKGEpe2Y9YVswXS50aHVtYm5haWxfbGFyZ2UsbChmKX19KSl9LGQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnRyaWdnZXIoXCJzdG9wXCIsbnVsbCxcInZpZGVvXCIpLHRoaXMuX3BsYXlpbmcuZmluZChcIi5vd2wtdmlkZW8tZnJhbWVcIikucmVtb3ZlKCksdGhpcy5fcGxheWluZy5yZW1vdmVDbGFzcyhcIm93bC12aWRlby1wbGF5aW5nXCIpLHRoaXMuX3BsYXlpbmc9bnVsbH0sZC5wcm90b3R5cGUucGxheT1mdW5jdGlvbihiKXt0aGlzLl9jb3JlLnRyaWdnZXIoXCJwbGF5XCIsbnVsbCxcInZpZGVvXCIpLHRoaXMuX3BsYXlpbmcmJnRoaXMuc3RvcCgpO3ZhciBjLGQsZT1hKGIudGFyZ2V0fHxiLnNyY0VsZW1lbnQpLGY9ZS5jbG9zZXN0KFwiLlwiK3RoaXMuX2NvcmUuc2V0dGluZ3MuaXRlbUNsYXNzKSxnPXRoaXMuX3ZpZGVvc1tmLmF0dHIoXCJkYXRhLXZpZGVvXCIpXSxoPWcud2lkdGh8fFwiMTAwJVwiLGk9Zy5oZWlnaHR8fHRoaXMuX2NvcmUuJHN0YWdlLmhlaWdodCgpO1wieW91dHViZVwiPT09Zy50eXBlP2M9JzxpZnJhbWUgd2lkdGg9XCInK2grJ1wiIGhlaWdodD1cIicraSsnXCIgc3JjPVwiaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK2cuaWQrXCI/YXV0b3BsYXk9MSZ2PVwiK2cuaWQrJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nOlwidmltZW9cIj09PWcudHlwZSYmKGM9JzxpZnJhbWUgc3JjPVwiaHR0cDovL3BsYXllci52aW1lby5jb20vdmlkZW8vJytnLmlkKyc/YXV0b3BsYXk9MVwiIHdpZHRoPVwiJytoKydcIiBoZWlnaHQ9XCInK2krJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicpLGYuYWRkQ2xhc3MoXCJvd2wtdmlkZW8tcGxheWluZ1wiKSx0aGlzLl9wbGF5aW5nPWYsZD1hKCc8ZGl2IHN0eWxlPVwiaGVpZ2h0OicraStcInB4OyB3aWR0aDpcIitoKydweFwiIGNsYXNzPVwib3dsLXZpZGVvLWZyYW1lXCI+JytjK1wiPC9kaXY+XCIpLGUuYWZ0ZXIoZCl9LGQucHJvdG90eXBlLmlzSW5GdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGQ9Yy5mdWxsc2NyZWVuRWxlbWVudHx8Yy5tb3pGdWxsU2NyZWVuRWxlbWVudHx8Yy53ZWJraXRGdWxsc2NyZWVuRWxlbWVudDtyZXR1cm4gZCYmYShkKS5wYXJlbnQoKS5oYXNDbGFzcyhcIm93bC12aWRlby1mcmFtZVwiKSYmKHRoaXMuX2NvcmUuc3BlZWQoMCksdGhpcy5fZnVsbHNjcmVlbj0hMCksZCYmdGhpcy5fZnVsbHNjcmVlbiYmdGhpcy5fcGxheWluZz8hMTp0aGlzLl9mdWxsc2NyZWVuPyh0aGlzLl9mdWxsc2NyZWVuPSExLCExKTp0aGlzLl9wbGF5aW5nJiZ0aGlzLl9jb3JlLnN0YXRlLm9yaWVudGF0aW9uIT09Yi5vcmllbnRhdGlvbj8odGhpcy5fY29yZS5zdGF0ZS5vcmllbnRhdGlvbj1iLm9yaWVudGF0aW9uLCExKTohMH0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoXCJjbGljay5vd2wudmlkZW9cIik7Zm9yKGEgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy5fY29yZS4kZWxlbWVudC5vZmYoYSx0aGlzLl9oYW5kbGVyc1thXSk7Zm9yKGIgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKHRoaXNbYl09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5WaWRlbz1kfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1mdW5jdGlvbihiKXt0aGlzLmNvcmU9Yix0aGlzLmNvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLHRoaXMuY29yZS5vcHRpb25zKSx0aGlzLnN3YXBwaW5nPSEwLHRoaXMucHJldmlvdXM9ZCx0aGlzLm5leHQ9ZCx0aGlzLmhhbmRsZXJzPXtcImNoYW5nZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe1wicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiYodGhpcy5wcmV2aW91cz10aGlzLmNvcmUuY3VycmVudCgpLHRoaXMubmV4dD1hLnByb3BlcnR5LnZhbHVlKX0sdGhpcyksXCJkcmFnLm93bC5jYXJvdXNlbCBkcmFnZ2VkLm93bC5jYXJvdXNlbCB0cmFuc2xhdGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5zd2FwcGluZz1cInRyYW5zbGF0ZWRcIj09YS50eXBlfSx0aGlzKSxcInRyYW5zbGF0ZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5zd2FwcGluZyYmKHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVPdXR8fHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVJbikmJnRoaXMuc3dhcCgpfSx0aGlzKX0sdGhpcy5jb3JlLiRlbGVtZW50Lm9uKHRoaXMuaGFuZGxlcnMpfTtlLkRlZmF1bHRzPXthbmltYXRlT3V0OiExLGFuaW1hdGVJbjohMX0sZS5wcm90b3R5cGUuc3dhcD1mdW5jdGlvbigpe2lmKDE9PT10aGlzLmNvcmUuc2V0dGluZ3MuaXRlbXMmJnRoaXMuY29yZS5zdXBwb3J0M2Qpe3RoaXMuY29yZS5zcGVlZCgwKTt2YXIgYixjPWEucHJveHkodGhpcy5jbGVhcix0aGlzKSxkPXRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLnByZXZpb3VzKSxlPXRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLm5leHQpLGY9dGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbixnPXRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0O3RoaXMuY29yZS5jdXJyZW50KCkhPT10aGlzLnByZXZpb3VzJiYoZyYmKGI9dGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMucHJldmlvdXMpLXRoaXMuY29yZS5jb29yZGluYXRlcyh0aGlzLm5leHQpLGQuY3NzKHtsZWZ0OmIrXCJweFwifSkuYWRkQ2xhc3MoXCJhbmltYXRlZCBvd2wtYW5pbWF0ZWQtb3V0XCIpLmFkZENsYXNzKGcpLm9uZShcIndlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmRcIixjKSksZiYmZS5hZGRDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1pblwiKS5hZGRDbGFzcyhmKS5vbmUoXCJ3ZWJraXRBbmltYXRpb25FbmQgbW96QW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgYW5pbWF0aW9uZW5kXCIsYykpfX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oYil7YShiLnRhcmdldCkuY3NzKHtsZWZ0OlwiXCJ9KS5yZW1vdmVDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1vdXQgb3dsLWFuaW1hdGVkLWluXCIpLnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlSW4pLnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0KSx0aGlzLmNvcmUudHJhbnNpdGlvbkVuZCgpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYSBpbiB0aGlzLmhhbmRsZXJzKXRoaXMuY29yZS4kZWxlbWVudC5vZmYoYSx0aGlzLmhhbmRsZXJzW2FdKTtmb3IoYiBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSlcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2JdJiYodGhpc1tiXT1udWxsKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkFuaW1hdGU9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGIpe3RoaXMuY29yZT1iLHRoaXMuY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuRGVmYXVsdHMsdGhpcy5jb3JlLm9wdGlvbnMpLHRoaXMuaGFuZGxlcnM9e1widHJhbnNsYXRlZC5vd2wuY2Fyb3VzZWwgcmVmcmVzaGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmF1dG9wbGF5KClcbn0sdGhpcyksXCJwbGF5Lm93bC5hdXRvcGxheVwiOmEucHJveHkoZnVuY3Rpb24oYSxiLGMpe3RoaXMucGxheShiLGMpfSx0aGlzKSxcInN0b3Aub3dsLmF1dG9wbGF5XCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuc3RvcCgpfSx0aGlzKSxcIm1vdXNlb3Zlci5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSYmdGhpcy5wYXVzZSgpfSx0aGlzKSxcIm1vdXNlbGVhdmUub3dsLmF1dG9wbGF5XCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuY29yZS5zZXR0aW5ncy5hdXRvcGxheUhvdmVyUGF1c2UmJnRoaXMuYXV0b3BsYXkoKX0sdGhpcyl9LHRoaXMuY29yZS4kZWxlbWVudC5vbih0aGlzLmhhbmRsZXJzKX07ZC5EZWZhdWx0cz17YXV0b3BsYXk6ITEsYXV0b3BsYXlUaW1lb3V0OjVlMyxhdXRvcGxheUhvdmVyUGF1c2U6ITEsYXV0b3BsYXlTcGVlZDohMX0sZC5wcm90b3R5cGUuYXV0b3BsYXk9ZnVuY3Rpb24oKXt0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXkmJiF0aGlzLmNvcmUuc3RhdGUudmlkZW9QbGF5PyhiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5pbnRlcnZhbD1iLnNldEludGVydmFsKGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnBsYXkoKX0sdGhpcyksdGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5VGltZW91dCkpOmIuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKX0sZC5wcm90b3R5cGUucGxheT1mdW5jdGlvbigpe3JldHVybiBjLmhpZGRlbj09PSEwfHx0aGlzLmNvcmUuc3RhdGUuaXNUb3VjaHx8dGhpcy5jb3JlLnN0YXRlLmlzU2Nyb2xsaW5nfHx0aGlzLmNvcmUuc3RhdGUuaXNTd2lwaW5nfHx0aGlzLmNvcmUuc3RhdGUuaW5Nb3Rpb24/dm9pZCAwOnRoaXMuY29yZS5zZXR0aW5ncy5hdXRvcGxheT09PSExP3ZvaWQgYi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOnZvaWQgdGhpcy5jb3JlLm5leHQodGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5U3BlZWQpfSxkLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxkLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe2IuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKX0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGM7Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO2ZvcihhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuaGFuZGxlcnNbYV0pO2ZvcihjIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbY10mJih0aGlzW2NdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuYXV0b3BsYXk9ZH0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9ZnVuY3Rpb24oYyl7dGhpcy5fY29yZT1jLHRoaXMuX2luaXRpYWxpemVkPSExLHRoaXMuX3BhZ2VzPVtdLHRoaXMuX2NvbnRyb2xzPXt9LHRoaXMuX3RlbXBsYXRlcz1bXSx0aGlzLiRlbGVtZW50PXRoaXMuX2NvcmUuJGVsZW1lbnQsdGhpcy5fb3ZlcnJpZGVzPXtuZXh0OnRoaXMuX2NvcmUubmV4dCxwcmV2OnRoaXMuX2NvcmUucHJldix0bzp0aGlzLl9jb3JlLnRvfSx0aGlzLl9oYW5kbGVycz17XCJwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe3RoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5wdXNoKGEoYi5jb250ZW50KS5maW5kKFwiW2RhdGEtZG90XVwiKS5hbmRTZWxmKFwiW2RhdGEtZG90XVwiKS5hdHRyKFwiZGF0YS1kb3RcIikpfSx0aGlzKSxcImFkZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe3RoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoYi5wb3NpdGlvbiwwLGEoYi5jb250ZW50KS5maW5kKFwiW2RhdGEtZG90XVwiKS5hbmRTZWxmKFwiW2RhdGEtZG90XVwiKS5hdHRyKFwiZGF0YS1kb3RcIikpfSx0aGlzKSxcInJlbW92ZS5vd2wuY2Fyb3VzZWwgcHJlcGFyZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLl9jb3JlLnNldHRpbmdzLmRvdHNEYXRhJiZ0aGlzLl90ZW1wbGF0ZXMuc3BsaWNlKGEucG9zaXRpb24sMSl9LHRoaXMpLFwiY2hhbmdlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7aWYoXCJwb3NpdGlvblwiPT1hLnByb3BlcnR5Lm5hbWUmJiF0aGlzLl9jb3JlLnN0YXRlLnJldmVydCYmIXRoaXMuX2NvcmUuc2V0dGluZ3MubG9vcCYmdGhpcy5fY29yZS5zZXR0aW5ncy5uYXZSZXdpbmQpe3ZhciBiPXRoaXMuX2NvcmUuY3VycmVudCgpLGM9dGhpcy5fY29yZS5tYXhpbXVtKCksZD10aGlzLl9jb3JlLm1pbmltdW0oKTthLmRhdGE9YS5wcm9wZXJ0eS52YWx1ZT5jP2I+PWM/ZDpjOmEucHJvcGVydHkudmFsdWU8ZD9jOmEucHJvcGVydHkudmFsdWV9fSx0aGlzKSxcImNoYW5nZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXtcInBvc2l0aW9uXCI9PWEucHJvcGVydHkubmFtZSYmdGhpcy5kcmF3KCl9LHRoaXMpLFwicmVmcmVzaGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9pbml0aWFsaXplZHx8KHRoaXMuaW5pdGlhbGl6ZSgpLHRoaXMuX2luaXRpYWxpemVkPSEwKSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJyZWZyZXNoXCIsbnVsbCxcIm5hdmlnYXRpb25cIiksdGhpcy51cGRhdGUoKSx0aGlzLmRyYXcoKSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJyZWZyZXNoZWRcIixudWxsLFwibmF2aWdhdGlvblwiKX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2IuRGVmYXVsdHM9e25hdjohMSxuYXZSZXdpbmQ6ITAsbmF2VGV4dDpbXCJwcmV2XCIsXCJuZXh0XCJdLG5hdlNwZWVkOiExLG5hdkVsZW1lbnQ6XCJkaXZcIixuYXZDb250YWluZXI6ITEsbmF2Q29udGFpbmVyQ2xhc3M6XCJvd2wtbmF2XCIsbmF2Q2xhc3M6W1wib3dsLXByZXZcIixcIm93bC1uZXh0XCJdLHNsaWRlQnk6MSxkb3RDbGFzczpcIm93bC1kb3RcIixkb3RzQ2xhc3M6XCJvd2wtZG90c1wiLGRvdHM6ITAsZG90c0VhY2g6ITEsZG90RGF0YTohMSxkb3RzU3BlZWQ6ITEsZG90c0NvbnRhaW5lcjohMSxjb250cm9sc0NsYXNzOlwib3dsLWNvbnRyb2xzXCJ9LGIucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgYixjLGQ9dGhpcy5fY29yZS5zZXR0aW5ncztkLmRvdHNEYXRhfHwodGhpcy5fdGVtcGxhdGVzPVthKFwiPGRpdj5cIikuYWRkQ2xhc3MoZC5kb3RDbGFzcykuYXBwZW5kKGEoXCI8c3Bhbj5cIikpLnByb3AoXCJvdXRlckhUTUxcIildKSxkLm5hdkNvbnRhaW5lciYmZC5kb3RzQ29udGFpbmVyfHwodGhpcy5fY29udHJvbHMuJGNvbnRhaW5lcj1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoZC5jb250cm9sc0NsYXNzKS5hcHBlbmRUbyh0aGlzLiRlbGVtZW50KSksdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnM9ZC5kb3RzQ29udGFpbmVyP2EoZC5kb3RzQ29udGFpbmVyKTphKFwiPGRpdj5cIikuaGlkZSgpLmFkZENsYXNzKGQuZG90c0NsYXNzKS5hcHBlbmRUbyh0aGlzLl9jb250cm9scy4kY29udGFpbmVyKSx0aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycy5vbihcImNsaWNrXCIsXCJkaXZcIixhLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpLnBhcmVudCgpLmlzKHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzKT9hKGIudGFyZ2V0KS5pbmRleCgpOmEoYi50YXJnZXQpLnBhcmVudCgpLmluZGV4KCk7Yi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudG8oYyxkLmRvdHNTcGVlZCl9LHRoaXMpKSxiPWQubmF2Q29udGFpbmVyP2EoZC5uYXZDb250YWluZXIpOmEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhkLm5hdkNvbnRhaW5lckNsYXNzKS5wcmVwZW5kVG8odGhpcy5fY29udHJvbHMuJGNvbnRhaW5lciksdGhpcy5fY29udHJvbHMuJG5leHQ9YShcIjxcIitkLm5hdkVsZW1lbnQrXCI+XCIpLHRoaXMuX2NvbnRyb2xzLiRwcmV2aW91cz10aGlzLl9jb250cm9scy4kbmV4dC5jbG9uZSgpLHRoaXMuX2NvbnRyb2xzLiRwcmV2aW91cy5hZGRDbGFzcyhkLm5hdkNsYXNzWzBdKS5odG1sKGQubmF2VGV4dFswXSkuaGlkZSgpLnByZXBlbmRUbyhiKS5vbihcImNsaWNrXCIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMucHJldihkLm5hdlNwZWVkKX0sdGhpcykpLHRoaXMuX2NvbnRyb2xzLiRuZXh0LmFkZENsYXNzKGQubmF2Q2xhc3NbMV0pLmh0bWwoZC5uYXZUZXh0WzFdKS5oaWRlKCkuYXBwZW5kVG8oYikub24oXCJjbGlja1wiLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLm5leHQoZC5uYXZTcGVlZCl9LHRoaXMpKTtmb3IoYyBpbiB0aGlzLl9vdmVycmlkZXMpdGhpcy5fY29yZVtjXT1hLnByb3h5KHRoaXNbY10sdGhpcyl9LGIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZDtmb3IoYSBpbiB0aGlzLl9oYW5kbGVycyl0aGlzLiRlbGVtZW50Lm9mZihhLHRoaXMuX2hhbmRsZXJzW2FdKTtmb3IoYiBpbiB0aGlzLl9jb250cm9scyl0aGlzLl9jb250cm9sc1tiXS5yZW1vdmUoKTtmb3IoZCBpbiB0aGlzLm92ZXJpZGVzKXRoaXMuX2NvcmVbZF09dGhpcy5fb3ZlcnJpZGVzW2RdO2ZvcihjIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbY10mJih0aGlzW2NdPW51bGwpfSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD10aGlzLl9jb3JlLnNldHRpbmdzLGU9dGhpcy5fY29yZS5jbG9uZXMoKS5sZW5ndGgvMixmPWUrdGhpcy5fY29yZS5pdGVtcygpLmxlbmd0aCxnPWQuY2VudGVyfHxkLmF1dG9XaWR0aHx8ZC5kb3REYXRhPzE6ZC5kb3RzRWFjaHx8ZC5pdGVtcztpZihcInBhZ2VcIiE9PWQuc2xpZGVCeSYmKGQuc2xpZGVCeT1NYXRoLm1pbihkLnNsaWRlQnksZC5pdGVtcykpLGQuZG90c3x8XCJwYWdlXCI9PWQuc2xpZGVCeSlmb3IodGhpcy5fcGFnZXM9W10sYT1lLGI9MCxjPTA7Zj5hO2ErKykoYj49Z3x8MD09PWIpJiYodGhpcy5fcGFnZXMucHVzaCh7c3RhcnQ6YS1lLGVuZDphLWUrZy0xfSksYj0wLCsrYyksYis9dGhpcy5fY29yZS5tZXJnZXJzKHRoaXMuX2NvcmUucmVsYXRpdmUoYSkpfSxiLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKCl7dmFyIGIsYyxkPVwiXCIsZT10aGlzLl9jb3JlLnNldHRpbmdzLGY9KHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCksdGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSkpO2lmKCFlLm5hdnx8ZS5sb29wfHxlLm5hdlJld2luZHx8KHRoaXMuX2NvbnRyb2xzLiRwcmV2aW91cy50b2dnbGVDbGFzcyhcImRpc2FibGVkXCIsMD49ZiksdGhpcy5fY29udHJvbHMuJG5leHQudG9nZ2xlQ2xhc3MoXCJkaXNhYmxlZFwiLGY+PXRoaXMuX2NvcmUubWF4aW11bSgpKSksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzLnRvZ2dsZShlLm5hdiksdGhpcy5fY29udHJvbHMuJG5leHQudG9nZ2xlKGUubmF2KSxlLmRvdHMpe2lmKGI9dGhpcy5fcGFnZXMubGVuZ3RoLXRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkubGVuZ3RoLGUuZG90RGF0YSYmMCE9PWIpe2ZvcihjPTA7Yzx0aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpLmxlbmd0aDtjKyspZCs9dGhpcy5fdGVtcGxhdGVzW3RoaXMuX2NvcmUucmVsYXRpdmUoYyldO3RoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmh0bWwoZCl9ZWxzZSBiPjA/KGQ9bmV3IEFycmF5KGIrMSkuam9pbih0aGlzLl90ZW1wbGF0ZXNbMF0pLHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmFwcGVuZChkKSk6MD5iJiZ0aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpLnNsaWNlKGIpLnJlbW92ZSgpO3RoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkuZXEoYS5pbkFycmF5KHRoaXMuY3VycmVudCgpLHRoaXMuX3BhZ2VzKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIil9dGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMudG9nZ2xlKGUuZG90cyl9LGIucHJvdG90eXBlLm9uVHJpZ2dlcj1mdW5jdGlvbihiKXt2YXIgYz10aGlzLl9jb3JlLnNldHRpbmdzO2IucGFnZT17aW5kZXg6YS5pbkFycmF5KHRoaXMuY3VycmVudCgpLHRoaXMuX3BhZ2VzKSxjb3VudDp0aGlzLl9wYWdlcy5sZW5ndGgsc2l6ZTpjJiYoYy5jZW50ZXJ8fGMuYXV0b1dpZHRofHxjLmRvdERhdGE/MTpjLmRvdHNFYWNofHxjLml0ZW1zKX19LGIucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKTtyZXR1cm4gYS5ncmVwKHRoaXMuX3BhZ2VzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXJ0PD1iJiZhLmVuZD49Yn0pLnBvcCgpfSxiLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbihiKXt2YXIgYyxkLGU9dGhpcy5fY29yZS5zZXR0aW5ncztyZXR1cm5cInBhZ2VcIj09ZS5zbGlkZUJ5PyhjPWEuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSx0aGlzLl9wYWdlcyksZD10aGlzLl9wYWdlcy5sZW5ndGgsYj8rK2M6LS1jLGM9dGhpcy5fcGFnZXNbKGMlZCtkKSVkXS5zdGFydCk6KGM9dGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSksZD10aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoLGI/Yys9ZS5zbGlkZUJ5OmMtPWUuc2xpZGVCeSksY30sYi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihiKXthLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKCEwKSxiKX0sYi5wcm90b3R5cGUucHJldj1mdW5jdGlvbihiKXthLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKCExKSxiKX0sYi5wcm90b3R5cGUudG89ZnVuY3Rpb24oYixjLGQpe3ZhciBlO2Q/YS5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sdGhpcy5fY29yZSkoYixjKTooZT10aGlzLl9wYWdlcy5sZW5ndGgsYS5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sdGhpcy5fY29yZSkodGhpcy5fcGFnZXNbKGIlZStlKSVlXS5zdGFydCxjKSl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5OYXZpZ2F0aW9uPWJ9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGM9ZnVuY3Rpb24oZCl7dGhpcy5fY29yZT1kLHRoaXMuX2hhc2hlcz17fSx0aGlzLiRlbGVtZW50PXRoaXMuX2NvcmUuJGVsZW1lbnQsdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe1wiVVJMSGFzaFwiPT10aGlzLl9jb3JlLnNldHRpbmdzLnN0YXJ0UG9zaXRpb24mJmEoYikudHJpZ2dlcihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIil9LHRoaXMpLFwicHJlcGFyZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihiKXt2YXIgYz1hKGIuY29udGVudCkuZmluZChcIltkYXRhLWhhc2hdXCIpLmFuZFNlbGYoXCJbZGF0YS1oYXNoXVwiKS5hdHRyKFwiZGF0YS1oYXNoXCIpO3RoaXMuX2hhc2hlc1tjXT1iLmNvbnRlbnR9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sYy5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpLGEoYikub24oXCJoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uXCIsYS5wcm94eShmdW5jdGlvbigpe3ZhciBhPWIubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksYz10aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLGQ9dGhpcy5faGFzaGVzW2FdJiZjLmluZGV4KHRoaXMuX2hhc2hlc1thXSl8fDA7cmV0dXJuIGE/dm9pZCB0aGlzLl9jb3JlLnRvKGQsITEsITApOiExfSx0aGlzKSl9O2MuRGVmYXVsdHM9e1VSTGhhc2hMaXN0ZW5lcjohMX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBjLGQ7YShiKS5vZmYoXCJoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uXCIpO2ZvcihjIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGMsdGhpcy5faGFuZGxlcnNbY10pO2ZvcihkIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbZF0mJih0aGlzW2RdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuSGFzaD1jfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=